<mat-card class="cardWithShadow">
    <mat-card-content class="p-24">
      <form #invoiceForm="ngForm">
        <div class="row justify-content-between m-b-24">
          <div class="col-sm-4 d-flex align-items-center">
            <h4 class="mat-subtitle-2 f-s-18 f-w-600"> #
              <span name="id" [(ngModel)]="invoice.id" ngDefaultControl> {{ invoice.id }}</span>
            </h4>
          </div>
          <div class="col-sm-4 text-right">
            <a routerLink="/apps/invoice" mat-stroked-button color="warn" class="m-r-10"> Cancel </a>
            <button mat-raised-button color="primary" (click)="saveDetail()" [disabled]="addForm.invalid"> Save Invoice </button>
          </div>
        </div>
        <mat-divider></mat-divider>
        <div class="row p-y-24 justify-content-between">
          <div class="col-sm-4">
            <span class="f-w-600 f-s-15 mat-body-1 d-block m-b-8"> Order Status: </span>
            <mat-form-field appearance="outline" class="w-100 theme-select">
              <mat-select name="satus" [(ngModel)]="invoice.status">
                <mat-option value="Pending"> Pending </mat-option>
                <mat-option value="Shipped"> Shipped </mat-option>
                <mat-option value="Delivered"> Delivered </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-sm-6 d-flex align-items-center justify-content-end">
            <div class="text-right">
              <span class="f-w-600 f-s-15 mat-body-1 d-block m-b-8">
                Order Date
              </span>
              <h6 name="date" class="m-t-5 m-b-0 f-w-500 f-s-14 mat-body-2" [(ngModel)]="invoice.orderDate" ngDefaultControl>
                {{ invoice.orderDate | date : "dd-MM-yyyy" }}
              </h6>
            </div>
          </div>
        </div>
        <mat-divider></mat-divider>
        <div class="row m-y-24 p-t-24">
          <div class="col-sm-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Bill From</mat-label>
              <input matInput placeholder="Bill From" name="from" [(ngModel)]="invoice.billFrom"/>
            </mat-form-field>
          </div>
          <div class="col-sm-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Bill To</mat-label>
              <input matInput placeholder="Bill To" name="to" [(ngModel)]="invoice.billTo" />
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Enter From Address</mat-label>
              <input matInput placeholder="Enter From Address" name="fromAddress" [(ngModel)]="invoice.billFromAddress" />
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Bill From</mat-label>
              <input matInput placeholder="Enter To Address" name="toAddress" [(ngModel)]="invoice.billToAddress"
              />
            </mat-form-field>
          </div>
        </div>
      </form>
  
      <div [formGroup]="addForm">
        <div class="table-responsive">
          <table class="table table-hover b-1 no-wrap w-100 rounded">
            <thead>
              <tr>
                <th class="p-16">#</th>
                <th class="p-16">Item Name</th>
                <th class="p-16">Unit Price</th>
                <th class="p-16">Units</th>
                <th class="p-16">Unit Total Price</th>
                <th class="p-16"></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let row of addForm.get('rows')['controls']; let index = index">
                <td class="p-16">
                  {{ index + 1 }}
                </td>
                <td class="p-16">
                  <mat-form-field appearance="outline" class="w-100 hide-hint">
                    <input type="text" matInput class="form-control" [formControl]="row.get('itemName')" (input)="itemsChanged()"/>
                  </mat-form-field>
                </td>
  
                <td class="p-16">
                  <mat-form-field appearance="outline" class="w-100 hide-hint">
                    <input type="number" matInput class="form-control" min="1" [formControl]="row.get('unitPrice')" (input)="itemsChanged()"/>
                  </mat-form-field>
                </td>
                <td class="p-16">
                  <mat-form-field appearance="outline" class="w-100 hide-hint">
                    <input type="number" matInput class="form-control" min="1" [formControl]="row.get('units')" (input)="itemsChanged()"/>
                  </mat-form-field>
                </td>
  
                <td class="p-16">
                  <mat-form-field appearance="outline" class="w-100 hide-hint">
                    <input [disabled]="true" matInput matInput class="form-control" [formControl]="row.get('itemTotal')" [value]="row.get('unitPrice').value * row.get('units').value"/>
                  </mat-form-field>
                </td>
                <td>
                  <div *ngIf="index > 0">
                    <button color="warn" mat-icon-button (click)="onRemoveRow(index)" class="d-flex justify-content-center">
                      <i-tabler name="trash" class="icon-18 d-flex"></i-tabler>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
  
        <div class="text-right m-t-30">
          <button color="primary" mat-flat-button (click)="onAddRow()" [disabled]="addForm.invalid" *ngIf="addForm.get('rows')"> Add row </button>
          <h5 class="m-b-5 f-w-600 f-s-16">Sub total: {{ subTotal }}</h5>
          <h5 class="f-w-600 f-s-16">Total Vat: {{ vat }}%</h5>
          <mat-divider></mat-divider>
          <h3 class="m-b-0 p-t-20 f-s-18">Grand Total: {{ grandTotal }}</h3>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
  

<!-- <div class="row">
    <div class="col-lg-12">
        <mat-card class="cardWithShadow theme-card">
          <mat-card-header>
            <mat-card-title class="m-b-0">Create Sale Offer </mat-card-title>
          </mat-card-header>
          <mat-card-content class="b-t-1"> -->

            <!-- <form [formGroup]="saleForm" (ngSubmit)="submitForm($event)" id="leadForm" enctype="multipart/form-data">
              <div class="row">
                <div class="col-sm-3">
                 <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small>Project Name</small> </mat-label>
                  <mat-form-field appearance="outline" class="w-100">
                    <input matInput placeholder="Project Name #XXXXXX" formControlName="project_name"  style="border-radius: 0px;"/>
                    <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                     <mat-hint *ngIf="f['project_name'].touched && f['project_name'].invalid" class="m-b-16 error-msg">
                      <div class="text-error" *ngIf="f['project_name'].errors && f['project_name'].errors['required']"> Project Name is required. </div>
                    </mat-hint> 
                  </mat-form-field>
                </div>
                <div class="col-sm-3">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small>Selling Price</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="Price #00000" formControlName="selling_price"  style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['selling_price'].touched && f['selling_price'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['selling_price'].errors && f['selling_price'].errors['required']"> Selling Price is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>
                <div class="col-sm-3">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small>BedRoom</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="BedRomm #00" formControlName="bedrooms"  style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['bedrooms'].touched && f['bedrooms'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['bedrooms'].errors && f['bedrooms'].errors['required']"> BedRooms Name is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>
                <div class="col-sm-3">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small>Total Area</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="Total Area" formControlName="total_area"  type="number" style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['total_area'].touched && f['total_area'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['total_area'].errors && f['total_area'].errors['required']"> Total Area is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>
                <div class="col-sm-3">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small>Built-Up Area</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="Built-Up Area" type="number" formControlName="built_up_area"  style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['built_up_area'].touched && f['built_up_area'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['built_up_area'].errors && f['built_up_area'].errors['required']"> Built Up is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>
                <div class="col-sm-3">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small>Payable Now</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="Built-Up Area" type="number" formControlName="payable_now"  style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['payable_now'].touched && f['payable_now'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['payable_now'].errors && f['payable_now'].errors['required']"> Payable Now is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>
                <div class="col-sm-3"></div>
                <div class="col-sm-3"></div>
                <div class="col-sm-12">
                   <label for="">When You Payable Remaing...</label> 
                    <hr>
                </div>
                <div class="col-sm-6" style="margin-top: 10px;">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small>Remaing 1st Installment Date</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <mat-label>Choose a date</mat-label>
                       <input matInput [matDatepicker]="picker" formControlName="Ist_installment_date"/>
                       <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                       <mat-datepicker #picker></mat-datepicker>
                       <mat-hint *ngIf="f['Ist_installment_date'].touched && f['Ist_installment_date'].invalid" class="m-b-16 error-msg">
                        <div class="text-error" *ngIf="f['Ist_installment_date'].errors && f['Ist_installment_date'].errors['required']"> Date is required. </div>
                      </mat-hint>
                     </mat-form-field>
                </div>
                <div class="col-sm-6 mt-3" style="margin-top: 10px;">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small>Remaing 1st Installment Price</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="1st Installment Price" type="number" formControlName="Ist_installment_price"  style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['Ist_installment_price'].touched && f['Ist_installment_price'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['Ist_installment_price'].errors && f['Ist_installment_price'].errors['required']"> Price is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>  
                <div class="col-sm-6" style="margin-top: 10px;">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small> Second Installment Date</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <mat-label>Choose a date</mat-label>
                       <input matInput [matDatepicker]="picker2" formControlName="second_installment_date"/>
                       <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
                       <mat-datepicker #picker2></mat-datepicker>
                       <mat-hint *ngIf="f['second_installment_date'].touched && f['second_installment_date'].invalid" class="m-b-16 error-msg">
                        <div class="text-error" *ngIf="f['second_installment_date'].errors && f['second_installment_date'].errors['required']"> Date is required. </div>
                      </mat-hint>
                     </mat-form-field>
                </div>
                <div class="col-sm-6 mt-3" style="margin-top: 10px;">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small> Second Installment Price</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="Second Installment Price" type="number" formControlName="second_installment_price"  style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['second_installment_price'].touched && f['second_installment_price'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['second_installment_price'].errors && f['second_installment_price'].errors['required']"> Price is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>
                <div class="col-sm-6" style="margin-top: 10px;">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small> Third Installment Date</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <mat-label>Choose a date</mat-label>
                       <input matInput [matDatepicker]="picker3" formControlName="third_installment_date"/>
                       <mat-datepicker-toggle matIconSuffix [for]="picker3"></mat-datepicker-toggle>
                       <mat-datepicker #picker3></mat-datepicker>
                       <mat-hint *ngIf="f['third_installment_date'].touched && f['third_installment_date'].invalid" class="m-b-16 error-msg">
                        <div class="text-error" *ngIf="f['third_installment_date'].errors && f['third_installment_date'].errors['required']"> Date is required. </div>
                      </mat-hint>
                     </mat-form-field>
                </div>
                <div class="col-sm-6 mt-3" style="margin-top: 10px;">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small> Third Installment Price</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="Third Installment Price" type="number" formControlName="third_installment_price"  style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['third_installment_price'].touched && f['third_installment_price'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['third_installment_price'].errors && f['third_installment_price'].errors['required']"> Price is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>
                <div class="col-sm-6" style="margin-top: 10px;">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small> Fourth Installment Date</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <mat-label>Choose a date</mat-label>
                       <input matInput [matDatepicker]="picker4" formControlName="fourth_installment_date"/>
                       <mat-datepicker-toggle matIconSuffix [for]="picker4"></mat-datepicker-toggle>
                       <mat-datepicker #picker4></mat-datepicker>
                       <mat-hint *ngIf="f['fourth_installment_date'].touched && f['fourth_installment_date'].invalid" class="m-b-16 error-msg">
                        <div class="text-error" *ngIf="f['fourth_installment_date'].errors && f['fourth_installment_date'].errors['required']"> Date is required. </div>
                      </mat-hint>
                     </mat-form-field>
                </div>
                <div class="col-sm-6 mt-3" style="margin-top: 10px;">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small> Fourth Installment Price</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="Third Installment Price" type="number" formControlName="fourth_installment_price"  (keyup)="updateHandOver($event)" style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['fourth_installment_price'].touched && f['fourth_installment_price'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['fourth_installment_price'].errors && f['fourth_installment_price'].errors['required']"> Price is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>
                <div class="col-sm-12 mt-3" style="margin-top: 10px;">
                    <mat-label style="padding-left: 6px;" class="mat-subtitle-2 d-block m-b-4"> <small> Hand-Over</small> </mat-label>
                     <mat-form-field appearance="outline" class="w-100">
                       <input matInput placeholder="Third Installment Price" type="number" formControlName="hand_over"  style="border-radius: 0px;"/>
                       <mat-icon matPrefix class="op-5"> <i-tabler name="user" class="icon-20 d-flex"></i-tabler></mat-icon>
                        <mat-hint *ngIf="f['hand_over'].touched && f['hand_over'].invalid" class="m-b-16 error-msg">
                         <div class="text-error" *ngIf="f['hand_over'].errors && f['hand_over'].errors['required']"> Price is required. </div>
                       </mat-hint> 
                     </mat-form-field>
                </div>

              </div>
              <div class="row justify-content-end">
                <div class="col-sm-12"> <button mat-flat-button color="primary">Send</button>
                </div>
              </div> 
            </form> -->







            <!-- <div [formGroup]="addForm">
                <div class="table-responsive">
                  <table class="table table-hover b-1 no-wrap w-100 rounded">
                    <thead>
                      <tr>
                        <th class="p-16">#</th>
                        <th class="p-16">Item Name</th>
                        <th class="p-16">Unit Price</th>
                        <th class="p-16">Units</th>
                        <th class="p-16">Unit Total Price</th>
                        <th class="p-16"></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let row of addForm.get('rows')['controls']; let index = index">
                        <td class="p-16">
                          {{ index + 1 }}
                        </td>
                        <td class="p-16">
                          <mat-form-field appearance="outline" class="w-100 hide-hint">
                            <input type="text" matInput class="form-control" [formControl]="row.get('itemName')" (input)="itemsChanged()"/>
                          </mat-form-field>
                        </td>
          
                        <td class="p-16">
                          <mat-form-field appearance="outline" class="w-100 hide-hint">
                            <input type="number" matInput class="form-control" min="1" [formControl]="row.get('unitPrice')" (input)="itemsChanged()"/>
                          </mat-form-field>
                        </td>
                        <td class="p-16">
                          <mat-form-field appearance="outline" class="w-100 hide-hint">
                            <input type="number" matInput class="form-control" min="1" [formControl]="row.get('units')" (input)="itemsChanged()"/>
                          </mat-form-field>
                        </td>
          
                        <td class="p-16">
                          <mat-form-field appearance="outline" class="w-100 hide-hint">
                            <input [disabled]="true" matInput matInput class="form-control" [formControl]="row.get('itemTotal')" [value]="row.get('unitPrice').value * row.get('units').value"/>
                          </mat-form-field>
                        </td>
                        <td>
                          <div *ngIf="index > 0">
                            <button color="warn" mat-icon-button (click)="onRemoveRow(index)" class="d-flex justify-content-center">
                              <i-tabler name="trash" class="icon-18 d-flex"></i-tabler>
                            </button>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
          
                <div class="text-right m-t-30">
                  <button
                    color="primary"
                    mat-flat-button
                    (click)="onAddRow()"
                    [disabled]="addForm.invalid"
                    *ngIf="addForm.get('rows')"
                  >
                    Add row
                  </button>
          
                  <h5 class="m-b-5 f-w-600 f-s-16">Sub total: {{ subTotal }}</h5>
                  <h5 class="f-w-600 f-s-16">Total Vat: {{ vat }}%</h5>
                  <mat-divider></mat-divider>
                  <h3 class="m-b-0 p-t-20 f-s-18">Grand Total: {{ grandTotal }}</h3>
                </div>
            </div> -->

          <!-- </mat-card-content>
        </mat-card>
      </div>
</div> -->