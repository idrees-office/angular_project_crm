"use strict";(self.webpackChunkModernize=self.webpackChunkModernize||[]).push([[645],{5645:(ve,S,r)=>{r.r(S),r.d(S,{LeadsModule:()=>xe});var u=r(4755),b=r(6873),c=r(9401),B=r(5226),p=r.n(B),t=r(2223),A=r(620),_=r(9114),T=r(8097),m=r(6012),q=r(1728),k=r(430),x=r(792);function F(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," Title is required. "),t.qZA())}function $(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,F,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.lead_title.errors&&n.f.lead_title.errors.required)}}function E(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," ClientName is required. "),t.qZA())}function j(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," ClientName is too short. "),t.qZA())}function H(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,E,2,0,"div",26),t.YNc(2,j,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.customer_name.errors&&n.f.customer_name.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.customer_name.errors&&n.f.customer_name.errors.minlength)}}function G(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," Email is required. "),t.qZA())}function z(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," Please Enter the Valid email. "),t.qZA())}function W(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,G,2,0,"div",26),t.YNc(2,z,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.customer_email.errors&&n.f.customer_email.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.customer_email.errors&&n.f.customer_email.errors.email)}}function K(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," PhoneNumber is required. "),t.qZA())}function X(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1,' "Please enter a valid phone number with a code starting with +. '),t.qZA())}function V(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,K,2,0,"div",26),t.YNc(2,X,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.customer_phone.errors&&n.f.customer_phone.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.customer_phone.errors&&n.f.customer_phone.errors.pattern)}}function tt(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," PhoneNumber is required. "),t.qZA())}function et(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1,' "Please enter a valid phone number with a code starting with +. '),t.qZA())}function nt(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,tt,2,0,"div",26),t.YNc(2,et,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.customer_phone2.errors&&n.f.customer_phone2.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.customer_phone2.errors&&n.f.customer_phone2.errors.pattern)}}let ot=(()=>{class e{constructor(n,i,a){this.LeadsService=n,this.router=i,this.fb=a,this.filteredAgents=[],this.agentIdControl=new c.NI}ngOnInit(){this.leadForm=this.fb.group({lead_title:new c.NI("",[c.kI.required]),customer_name:new c.NI("",[c.kI.required,c.kI.minLength(4)]),customer_phone:new c.NI("",[c.kI.required,c.kI.pattern(/^\+(?:[0-9] ?){6,14}[0-9]$/)]),customer_phone2:new c.NI("",[c.kI.required,c.kI.pattern(/^\+(?:[0-9] ?){6,14}[0-9]$/)]),customer_email:new c.NI("",[c.kI.required,c.kI.email]),customer_position:new c.NI(""),lead_comments:new c.NI("")}),this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.loginuserId=this.user.client_user_id,this.role=this.user.role_id}submitForm(n){if(!this.leadForm.invalid&&this.leadForm.valid){const i=new FormData,a=this.leadForm.value;i.append("login_user_id",1==this.role||1===this.role?this.loginuserId:"empty"),i.append("lead_title",a.lead_title),i.append("agent_id",a.agent_id),i.append("customer_name",a.customer_name),i.append("customer_phone",a.customer_phone),i.append("customer_email",a.customer_email),i.append("customer_position",a.customer_position),i.append("customer_phone2",a.customer_phone2),i.append("lead_comments",a.lead_comments),this.LeadsService.createLead(i).subscribe(s=>{"success"===s.status&&(p().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:"Create Lead Successfully",icon:"success"}),this.leadForm.reset(),this.router.navigate(["/leads/assign-lead"]))},s=>{(403===s.status||403==s.status)&&(p().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:"You Don't Save Pemission to Add Leads",icon:"success"}),this.router.navigate(["error"]))})}}onAgentChange(n){const i=this.leadForm.get("agent_id")?.value;this.LeadsService.AgentNameById(i).subscribe(a=>{a&&a.length>0?this.selectedAgentName=""===a[0].client_user_name?"empty":a[0].client_user_name:alert("Could Not find Any User")},a=>{(430==a.status||430===a.status)&&this.router.navigate(["error"])})}filterAgents(n){const i=n.target.value;"string"==typeof i&&(this.allAgents=this.allAgents.filter(a=>a.client_user_name.toLowerCase().includes(i.toLowerCase())))}get f(){return this.leadForm.controls}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(A.C),t.Y36(b.F0),t.Y36(c.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-create-lead"]],decls:80,vars:6,consts:[[1,"row"],[1,"col-lg-4"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"b-t-1"],["id","leadForm","enctype","multipart/form-data",3,"formGroup","ngSubmit"],[1,"col-sm-12","d-flex","align-items-center"],[1,"mat-subtitle-2","f-w-600","d-block","m-b-16"],[1,"col-sm-12"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Lead Title #XXXXXX","formControlName","lead_title",2,"border-radius","0px"],["matPrefix","",1,"op-5"],["name","user",1,"icon-20","d-flex"],["class","m-b-16 error-msg",4,"ngIf"],["matInput","","placeholder","john.deo","type","text","formControlName","customer_name"],["name","mail",1,"icon-20","d-flex"],["matInput","","placeholder","john.deo","type","email","formControlName","customer_email"],["matInput","","placeholder","123 4561 123","formControlName","customer_phone"],["name","phone",1,"icon-20","d-flex"],["matInput","","placeholder","123 4561 123","formControlName","customer_phone2"],["matInput","","placeholder","Position","formControlName","customer_position"],["rows","5","formControlName","lead_comments","matInput","","placeholder","Hi, Do you have a moment to talk Deo ?"],["name","message-2",1,"icon-20","d-flex"],[1,"row","justify-content-end"],["mat-flat-button","","color","primary"],[1,"m-b-16","error-msg"],["class","text-error",4,"ngIf"],[1,"text-error"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title",3),t._uU(5,"Create Leads"),t.qZA()(),t.TgZ(6,"mat-card-content",4)(7,"form",5),t.NdJ("ngSubmit",function(s){return i.submitForm(s)}),t.TgZ(8,"div",0)(9,"div",6)(10,"mat-label",7),t._uU(11,"Lead Title"),t.qZA()(),t.TgZ(12,"div",8)(13,"mat-form-field",9),t._UZ(14,"input",10),t.TgZ(15,"mat-icon",11),t._UZ(16,"i-tabler",12),t.qZA(),t.YNc(17,$,2,1,"mat-hint",13),t.qZA()()(),t.TgZ(18,"div",0)(19,"div",6)(20,"mat-label",7),t._uU(21,"Client Name"),t.qZA()(),t.TgZ(22,"div",8)(23,"mat-form-field",9),t._UZ(24,"input",14),t.TgZ(25,"mat-icon",11),t._UZ(26,"i-tabler",15),t.qZA(),t.YNc(27,H,3,2,"mat-hint",13),t.qZA()()(),t.TgZ(28,"div",0)(29,"div",6)(30,"mat-label",7),t._uU(31,"Client Email"),t.qZA()(),t.TgZ(32,"div",8)(33,"mat-form-field",9),t._UZ(34,"input",16),t.TgZ(35,"mat-icon",11),t._UZ(36,"i-tabler",15),t.qZA(),t.YNc(37,W,3,2,"mat-hint",13),t.qZA()()(),t.TgZ(38,"div",0)(39,"div",6)(40,"mat-label",7),t._uU(41,"Client Phone"),t.qZA()(),t.TgZ(42,"div",8)(43,"mat-form-field",9),t._UZ(44,"input",17),t.TgZ(45,"mat-icon",11),t._UZ(46,"i-tabler",18),t.qZA(),t.YNc(47,V,3,2,"mat-hint",13),t.qZA()()(),t.TgZ(48,"div",0)(49,"div",6)(50,"mat-label",7),t._uU(51,"Client WhatsApp Number"),t.qZA()(),t.TgZ(52,"div",8)(53,"mat-form-field",9),t._UZ(54,"input",19),t.TgZ(55,"mat-icon",11),t._UZ(56,"i-tabler",18),t.qZA(),t.YNc(57,nt,3,2,"mat-hint",13),t.qZA()()(),t.TgZ(58,"div",0)(59,"div",6)(60,"mat-label",7),t._uU(61,"Client Position (Optional)"),t.qZA()(),t.TgZ(62,"div",8)(63,"mat-form-field",9),t._UZ(64,"input",20),t.TgZ(65,"mat-icon",11),t._UZ(66,"i-tabler",12),t.qZA()()()(),t.TgZ(67,"div",0)(68,"div",6)(69,"mat-label",7),t._uU(70,"Comments"),t.qZA()(),t.TgZ(71,"div",8)(72,"mat-form-field",9),t._UZ(73,"textarea",21),t.TgZ(74,"mat-icon",11),t._UZ(75,"i-tabler",22),t.qZA()()()(),t.TgZ(76,"div",23)(77,"div",8)(78,"button",24),t._uU(79,"Send"),t.qZA()()()()()()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",i.leadForm),t.xp6(10),t.Q6J("ngIf",i.f.lead_title.touched&&i.f.lead_title.invalid),t.xp6(10),t.Q6J("ngIf",i.f.customer_name.touched&&i.f.customer_name.invalid),t.xp6(10),t.Q6J("ngIf",i.f.customer_email.touched&&i.f.customer_email.invalid),t.xp6(10),t.Q6J("ngIf",i.f.customer_phone.touched&&i.f.customer_phone.invalid),t.xp6(10),t.Q6J("ngIf",i.f.customer_phone2.touched&&i.f.customer_phone2.invalid))},dependencies:[u.O5,_.KE,_.hX,_.bx,_.qo,T.Nt,m.a8,m.dn,m.dk,m.n5,q.lW,k.Hw,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,x.b],styles:[".ng-select.ng-select-opened[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{background:#fff;border-color:#b3b3b3 #ccc #d9d9d9}.ng-select.ng-select-opened[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]:hover{box-shadow:none}.ng-select.ng-select-opened[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]   .ng-arrow[_ngcontent-%COMP%]{top:-2px;border-color:transparent transparent #999;border-width:0 5px 5px}.ng-select.ng-select-opened[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]   .ng-arrow[_ngcontent-%COMP%]:hover{border-color:transparent transparent #333}.ng-select.ng-select-opened.ng-select-top[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{border-top-right-radius:0;border-top-left-radius:0}.ng-select.ng-select-opened.ng-select-right[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.ng-select.ng-select-opened.ng-select-bottom[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{border-bottom-right-radius:0;border-bottom-left-radius:0}.ng-select.ng-select-opened.ng-select-left[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}.ng-select.ng-select-focused[_ngcontent-%COMP%]:not(.ng-select-opened) > .ng-select-container[_ngcontent-%COMP%]{border-color:#007eff;box-shadow:inset 0 1px 1px #00000013,0 0 0 3px #007eff1a}.ng-select.ng-select-disabled[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{background-color:#f9f9f9}.ng-select[_ngcontent-%COMP%]   .ng-has-value[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{display:none}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{color:#333;background-color:#fff;border-radius:4px;border:1px solid #ccc;min-height:36px;align-items:center}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]:hover{box-shadow:0 1px #0000000f}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{align-items:center;padding-left:10px}[dir=rtl][_ngcontent-%COMP%]   .ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{padding-right:10px;padding-left:0}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{color:#999}.ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{height:36px}.ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%]{top:5px;left:0;padding-left:10px;padding-right:50px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%]{padding-right:10px;padding-left:50px}.ng-select.ng-select-multiple.ng-select-disabled[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #e6e6e6}.ng-select.ng-select-multiple.ng-select-disabled[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-label[_ngcontent-%COMP%]{padding:0 5px}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{padding-top:5px;padding-left:7px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{padding-right:7px;padding-left:0}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]{font-size:.9em;margin-bottom:5px;color:#333;background-color:#ebf5ff;border-radius:2px;margin-right:5px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value.ng-value-disabled[_ngcontent-%COMP%]{background-color:#f9f9f9}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value.ng-value-disabled[_ngcontent-%COMP%]   .ng-value-label[_ngcontent-%COMP%]{padding-left:5px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value.ng-value-disabled[_ngcontent-%COMP%]   .ng-value-label[_ngcontent-%COMP%]{padding-left:0;padding-right:5px}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-label[_ngcontent-%COMP%], .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon[_ngcontent-%COMP%]{display:inline-block;padding:1px 5px}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon[_ngcontent-%COMP%]:hover{background-color:#d1e8ff}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon.left[_ngcontent-%COMP%]{border-right:1px solid #b8dbff}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon.left[_ngcontent-%COMP%]{border-left:1px solid #b8dbff;border-right:none}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon.right[_ngcontent-%COMP%]{border-left:1px solid #b8dbff}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon.right[_ngcontent-%COMP%]{border-left:0;border-right:1px solid #b8dbff}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%]{padding:0 0 3px 3px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%]{padding:0 3px 3px 0}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{color:#000}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{top:5px;padding-bottom:5px;padding-left:3px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{padding-right:3px;padding-left:0}.ng-select[_ngcontent-%COMP%]   .ng-clear-wrapper[_ngcontent-%COMP%]{color:#999}.ng-select[_ngcontent-%COMP%]   .ng-clear-wrapper[_ngcontent-%COMP%]:hover   .ng-clear[_ngcontent-%COMP%]{color:#d0021b}.ng-select[_ngcontent-%COMP%]   .ng-clear-wrapper[_ngcontent-%COMP%]:focus   .ng-clear[_ngcontent-%COMP%]{color:#d0021b}.ng-select[_ngcontent-%COMP%]   .ng-clear-wrapper[_ngcontent-%COMP%]:focus{outline:none}.ng-select[_ngcontent-%COMP%]   .ng-spinner-zone[_ngcontent-%COMP%]{padding:5px 5px 0 0}[dir=rtl][_ngcontent-%COMP%]   .ng-select[_ngcontent-%COMP%]   .ng-spinner-zone[_ngcontent-%COMP%]{padding:5px 0 0 5px}.ng-select[_ngcontent-%COMP%]   .ng-arrow-wrapper[_ngcontent-%COMP%]{width:25px;padding-right:5px}[dir=rtl][_ngcontent-%COMP%]   .ng-select[_ngcontent-%COMP%]   .ng-arrow-wrapper[_ngcontent-%COMP%]{padding-left:5px;padding-right:0}.ng-select[_ngcontent-%COMP%]   .ng-arrow-wrapper[_ngcontent-%COMP%]:hover   .ng-arrow[_ngcontent-%COMP%]{border-top-color:#666}.ng-select[_ngcontent-%COMP%]   .ng-arrow-wrapper[_ngcontent-%COMP%]   .ng-arrow[_ngcontent-%COMP%]{border-color:#999 transparent transparent;border-style:solid;border-width:5px 5px 2.5px}.ng-dropdown-panel[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;box-shadow:0 1px #0000000f;left:0}.ng-dropdown-panel.ng-select-top[_ngcontent-%COMP%]{bottom:100%;border-top-right-radius:4px;border-top-left-radius:4px;border-bottom-color:#e6e6e6;margin-bottom:-1px}.ng-dropdown-panel.ng-select-top[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.ng-dropdown-panel.ng-select-right[_ngcontent-%COMP%]{left:100%;top:0;border-top-right-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;border-bottom-color:#e6e6e6;margin-bottom:-1px}.ng-dropdown-panel.ng-select-right[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:first-child{border-top-right-radius:4px}.ng-dropdown-panel.ng-select-bottom[_ngcontent-%COMP%]{top:100%;border-bottom-right-radius:4px;border-bottom-left-radius:4px;border-top-color:#e6e6e6;margin-top:-1px}.ng-dropdown-panel.ng-select-bottom[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.ng-dropdown-panel.ng-select-left[_ngcontent-%COMP%]{left:-100%;top:0;border-top-left-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;border-bottom-color:#e6e6e6;margin-bottom:-1px}.ng-dropdown-panel.ng-select-left[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:first-child{border-top-left-radius:4px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-header[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;padding:5px 7px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-footer[_ngcontent-%COMP%]{border-top:1px solid #ccc;padding:5px 7px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;padding:8px 10px;font-weight:500;color:#0000008a;cursor:pointer}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup.ng-option-disabled[_ngcontent-%COMP%]{cursor:default}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup.ng-option-marked[_ngcontent-%COMP%]{background-color:#f5faff}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup.ng-option-selected[_ngcontent-%COMP%], .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup.ng-option-selected.ng-option-marked[_ngcontent-%COMP%]{color:#0000008a;background-color:#ebf5ff;font-weight:600}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]{background-color:#fff;color:#000000de;padding:8px 10px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-selected[_ngcontent-%COMP%], .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-selected.ng-option-marked[_ngcontent-%COMP%]{color:#333;background-color:#ebf5ff}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-selected[_ngcontent-%COMP%]   .ng-option-label[_ngcontent-%COMP%], .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-selected.ng-option-marked[_ngcontent-%COMP%]   .ng-option-label[_ngcontent-%COMP%]{font-weight:600}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-marked[_ngcontent-%COMP%]{background-color:#f5faff;color:#333}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-disabled[_ngcontent-%COMP%]{color:#ccc}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-child[_ngcontent-%COMP%]{padding-left:22px}[dir=rtl][_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-child[_ngcontent-%COMP%]{padding-right:22px;padding-left:0}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]   .ng-tag-label[_ngcontent-%COMP%]{font-size:80%;font-weight:400;padding-right:5px}[dir=rtl][_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]   .ng-tag-label[_ngcontent-%COMP%]{padding-left:5px;padding-right:0}[dir=rtl][_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{direction:rtl;text-align:right}  .mat-form-field-appearance-outline .mat-form-field-outline{border-radius:0}  .mat-form-field-appearance-outline .mat-form-field-flex{border-radius:0}.mat-mdc-text-field-wrapper.mdc-text-field--outlined[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{height:40px}"]}),e})();var M=r(3276),O=r(2611),y=r(6451),P=r(9646),Q=r(2843),L=r(8675),R=r(3900),C=r(4004),f=r(262),U=r(9234),Z=r(3144),N=r(8995),J=r(1217),I=r(8467),d=r(3627);function it(e,o){1&e&&t._UZ(0,"mat-spinner")}function at(e,o){1&e&&(t.TgZ(0,"div",21),t._uU(1," API rate limit has been reached. It will be reset in one minute. "),t.qZA())}function st(e,o){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,it,1,0,"mat-spinner",19),t.YNc(2,at,2,0,"div",20),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isLoadingResults),t.xp6(1),t.Q6J("ngIf",n.isRateLimitReached)}}function rt(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," # "),t.qZA())}function lt(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.counter," ")}}function ct(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Lead Title "),t.qZA())}function dt(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.lead_title||"Invalid Title"," ")}}function gt(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Agent Name "),t.qZA())}function pt(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.agent_name||"Invalid Name"," ")}}function mt(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Client Name "),t.qZA())}function ut(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_name||"Invalid Name"," ")}}function _t(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Client Phone "),t.qZA())}function ht(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_phone||"Invalid Name"," ")}}function ft(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Actions "),t.qZA())}function Ct(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",23)(1,"a",24),t.NdJ("click",function(a){const g=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.Delete(a,g.lead_id))}),t._UZ(2,"i-tabler",25),t.qZA()()}}function xt(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Reassign "),t.qZA())}function Mt(e,o){if(1&e&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.client_user_name,"")}}function Ot(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",26)(1,"mat-form-field",27),t._UZ(2,"input",28),t.TgZ(3,"mat-autocomplete",29,30),t.NdJ("optionSelected",function(a){const g=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.onOptionSelected(a,g))}),t.YNc(5,Mt,2,2,"mat-option",31),t.qZA()()()}if(2&e){const n=t.MAs(4),i=t.oxw();t.xp6(2),t.Q6J("matAutocomplete",n),t.xp6(1),t.Q6J("displayWith",i.displayLeadLabel),t.xp6(2),t.Q6J("ngForOf",i.allAgents)}}function Pt(e,o){1&e&&t._UZ(0,"tr",33)}function vt(e,o){1&e&&t._UZ(0,"tr",34)}let bt=(()=>{class e{constructor(n,i,a){this._httpClient=n,this._LeadsService=i,this._router=a,this.displayedColumns=["lead_id","lead_title","agent_name","customer_name","customer_phone","reassign","actions"],this.exampleDatabase=null,this.leadsData=[],this.counter=1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1}ngAfterViewInit(){this.exampleDatabase=new Zt(this._httpClient,this._router),this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,y.T)(this.sort.sortChange,this.paginator.page).pipe((0,L.O)({}),(0,R.w)(()=>(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex))),(0,C.U)(n=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,n.data)),(0,f.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,P.of)([])))).subscribe(n=>this.leadsData=n))}ngOnInit(){this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.loginuserId=this.user.client_user_id,this.role=this.user.role_id,this.agents()}Delete(n,i){p().fire({title:"Are you sure want to remove?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(a=>{a.isConfirmed&&this._LeadsService.DeleteLead(i).subscribe(s=>{"delete"===s.status&&(p().fire({title:"Success",html:"Lead Delete Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},s=>{console.log(s)})})}reloadData(){this.sort&&this.paginator&&(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex).pipe((0,f.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,P.of)([])))).subscribe(n=>{"data"in n&&(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,this.leadsData=n.data)}))}agents(){this._LeadsService.getAgentInfo().subscribe(n=>{this.allAgents=n},n=>{console.log(n)})}onOptionSelected(n,i){p().fire({html:"Are you sure want to Re-assign?",showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(a=>{if(a.isConfirmed){this.reassignLeadSelectedAgent=n.option.value;const g=i.lead_id;if(""!=this.reassignLeadSelectedAgent&&""!=g){var s=new FormData;this.loginuserId&&s.append("login_user_id",this.loginuserId),s.append("agent_id",this.reassignLeadSelectedAgent.client_user_id),s.append("lead_id",g),this._LeadsService.ReAssignLeads(s).subscribe(l=>{"success"===l.status&&(p().fire({title:"Success",html:"Lead Re-assigned Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},l=>{console.log(l)})}else alert("SomeThing Wrong")}})}displayLeadLabel(n){return n?n.client_user_name:""}Reassign(n,i){""!=i&&p().fire({html:"Are you sure want to Re-assign?",showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(a=>{a.isConfirmed&&alert("Open Modal")})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.eN),t.Y36(A.C),t.Y36(b.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-re-assign"]],viewQuery:function(n,i){if(1&n&&(t.Gf(M.NW,5),t.Gf(O.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},decls:31,vars:6,consts:[[1,"cardWithShadow"],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","lead_id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lead_title"],["matColumnDef","agent_name"],["matColumnDef","customer_name"],["matColumnDef","customer_phone"],["matColumnDef","actions"],["matColumnDef","reassign"],["mat-cell","","style","width: 50px;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],[1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-cell","",2,"width","50px"],["appearance","outline",1,"custom-width","mt-5"],["type","text","placeholder","Select Agent","aria-label","Number","matInput","",3,"matAutocomplete"],[3,"displayWith","optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(n,i){1&n&&(t.TgZ(0,"mat-card",0),t._UZ(1,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",1),t.YNc(4,st,3,2,"div",2),t.TgZ(5,"div",3)(6,"table",4),t.ynx(7,5),t.YNc(8,rt,2,0,"th",6),t.YNc(9,lt,2,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,ct,2,0,"th",6),t.YNc(12,dt,2,1,"td",7),t.BQk(),t.ynx(13,9),t.YNc(14,gt,2,0,"th",6),t.YNc(15,pt,2,1,"td",7),t.BQk(),t.ynx(16,10),t.YNc(17,mt,2,0,"th",6),t.YNc(18,ut,2,1,"td",7),t.BQk(),t.ynx(19,11),t.YNc(20,_t,2,0,"th",6),t.YNc(21,ht,2,1,"td",7),t.BQk(),t.ynx(22,12),t.YNc(23,ft,2,0,"th",6),t.YNc(24,Ct,3,0,"td",7),t.BQk(),t.ynx(25,13),t.YNc(26,xt,2,0,"th",6),t.YNc(27,Ot,6,3,"td",14),t.BQk(),t.YNc(28,Pt,1,0,"tr",15),t.YNc(29,vt,1,0,"tr",16),t.qZA()(),t._UZ(30,"mat-paginator",17),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("ngIf",i.isLoadingResults||i.isRateLimitReached),t.xp6(2),t.Q6J("dataSource",i.leadsData),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.resultsLength)("pageSize",10))},dependencies:[u.sg,u.O5,N.XC,J.ey,N.ZL,_.KE,T.Nt,m.a8,m.dn,m.dk,I.Ou,M.NW,O.YE,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,x.b],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.custom-width[_ngcontent-%COMP%]{width:180px}[_nghost-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%]{height:80%!important}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:2px!important;padding-bottom:2px!important}[_nghost-%COMP%]     .mat-mdc-form-field-infix{min-height:10px!important}"]}),e})();class Zt{constructor(o,n){this._httpClient=o,this._router=n}getLeads(o,n,i){return this._httpClient.get(`${U.N.baseUrl}/leads/reassign-lead-list?sort=${o}&order=${n}&page=${i+1}`).pipe((0,C.U)(l=>({...l,data:l.data.map((h,w)=>({...h,counter:w+1+10*i}))})),(0,f.K)(l=>(this._router.navigate(["/error"]),(0,Q._)(l))))}}function wt(e,o){1&e&&t._UZ(0,"mat-spinner")}function At(e,o){1&e&&(t.TgZ(0,"div",20),t._uU(1," API rate limit has been reached. It will be reset in one minute. "),t.qZA())}function Tt(e,o){if(1&e&&(t.TgZ(0,"div",17),t.YNc(1,wt,1,0,"mat-spinner",18),t.YNc(2,At,2,0,"div",19),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isLoadingResults),t.xp6(1),t.Q6J("ngIf",n.isRateLimitReached)}}function Lt(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," # "),t.qZA())}function Nt(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.counter," ")}}function Dt(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," Lead Title "),t.qZA())}function yt(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.lead_title||"Invalid Title"," ")}}function Rt(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Client Name "),t.qZA())}function Ut(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_name||"Invalid Name"," ")}}function It(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Client Phone "),t.qZA())}function Yt(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_phone||"Invalid Name"," ")}}function St(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," Actions "),t.qZA())}function qt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",22)(1,"a",23),t.NdJ("click",function(a){const g=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.Delete(a,g.lead_id))}),t._UZ(2,"i-tabler",24),t.qZA()()}}function Qt(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," Assign "),t.qZA())}function Jt(e,o){if(1&e&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.name," ")}}function Bt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",25)(1,"mat-form-field",26),t._UZ(2,"input",27),t.TgZ(3,"mat-autocomplete",28,29),t.NdJ("optionSelected",function(a){const g=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.onOptionSelected(a,g))}),t.YNc(5,Jt,2,2,"mat-option",30),t.ALo(6,"async"),t.qZA()()()}if(2&e){const n=t.MAs(4),i=t.oxw();t.xp6(2),t.Q6J("formControl",i.firstControl)("matAutocomplete",n),t.xp6(1),t.Q6J("displayWith",i.displaySelectedAgent),t.xp6(2),t.Q6J("ngForOf",t.lcZ(6,4,i.filteredOptions))}}function kt(e,o){1&e&&t._UZ(0,"tr",32)}function Ft(e,o){1&e&&t._UZ(0,"tr",33)}let $t=(()=>{class e{constructor(n,i,a,s){this._httpClient=n,this._LeadsService=i,this._Router=a,this._ChangeDetectorRef=s,this.displayedColumns=["lead_id","lead_title","customer_name","customer_phone","reassign","actions"],this.exampleDatabase=null,this.leadsData=[],this.counter=1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.allAgents=[],this.firstControl=new c.NI("")}ngAfterViewInit(){this.exampleDatabase=new Et(this._httpClient),this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,y.T)(this.sort.sortChange,this.paginator.page).pipe((0,L.O)({}),(0,R.w)(()=>(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex))),(0,C.U)(n=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,n.data)),(0,f.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,P.of)([])))).subscribe(n=>this.leadsData=n))}ngOnInit(){this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.loginuserId=this.user.client_user_id,this.role=this.user.role_id,this.agents(),this.filteredOptions=this.firstControl.valueChanges.pipe((0,L.O)(""),(0,C.U)(n=>this._filter(n)))}_filter(n){return this.allAgents.filter(i=>i.client_user_name.includes(n)).map(i=>({name:i.client_user_name,id:i.client_user_id}))}displaySelectedAgent(n){return n?n.name:""}agents(){this._LeadsService.getAgentInfo().subscribe(n=>{this.allAgents=n},n=>{(430==n.status||430===n.status)&&this._Router.navigate(["error"])})}Delete(n,i){p().fire({title:"Are you sure want to remove?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(a=>{a.isConfirmed&&this._LeadsService.DeleteLead(i).subscribe(s=>{"delete"===s.status&&(p().fire({title:"Success",html:"Lead Delete Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},s=>{(430==s.status||430===s.status)&&this._Router.navigate(["error"])})})}reloadData(){this.sort&&this.paginator&&(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex).pipe((0,f.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,P.of)([])))).subscribe(n=>{"data"in n&&(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,this.leadsData=n.data)}))}onOptionSelected(n,i){this.firstControl.setValue(n.option.value.name),this._ChangeDetectorRef.detectChanges(),p().fire({html:"Are you sure want to Assign?",showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(s=>{if(s.isConfirmed){this.reassignLeadSelectedAgent=n.option.value;const l=i.lead_id;if(""!=this.reassignLeadSelectedAgent&&""!=l){var g=new FormData;g.append("agent_id",this.reassignLeadSelectedAgent.client_user_id),g.append("lead_id",l),this.loginuserId&&g.append("login_user_id",this.loginuserId),this._LeadsService.AssignLeads(g).subscribe(h=>{"success"===h.status&&(p().fire({title:"Success",html:"Lead Re-assigned Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},h=>{(430==h.status||430===h.status)&&this._Router.navigate(["error"])})}else alert("SomeThing Wrong")}})}displayLeadLabel(n){return n?n.client_user_name:""}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.eN),t.Y36(A.C),t.Y36(b.F0),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-assign-lead"]],viewQuery:function(n,i){if(1&n&&(t.Gf(M.NW,5),t.Gf(O.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},decls:28,vars:6,consts:[[1,"cardWithShadow"],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","lead_id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lead_title"],["matColumnDef","customer_name"],["matColumnDef","customer_phone"],["matColumnDef","actions"],["matColumnDef","reassign"],["mat-cell","","style","width: 50px;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],[1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-cell","",2,"width","50px"],["appearance","outline",1,"custom-width","mt-5"],["type","text","placeholder","Select Agent","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(n,i){1&n&&(t.TgZ(0,"mat-card",0),t._UZ(1,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",1),t.YNc(4,Tt,3,2,"div",2),t.TgZ(5,"div",3)(6,"table",4),t.ynx(7,5),t.YNc(8,Lt,2,0,"th",6),t.YNc(9,Nt,2,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,Dt,2,0,"th",6),t.YNc(12,yt,2,1,"td",7),t.BQk(),t.ynx(13,9),t.YNc(14,Rt,2,0,"th",6),t.YNc(15,Ut,2,1,"td",7),t.BQk(),t.ynx(16,10),t.YNc(17,It,2,0,"th",6),t.YNc(18,Yt,2,1,"td",7),t.BQk(),t.ynx(19,11),t.YNc(20,St,2,0,"th",6),t.YNc(21,qt,3,0,"td",7),t.BQk(),t.ynx(22,12),t.YNc(23,Qt,2,0,"th",6),t.YNc(24,Bt,7,6,"td",13),t.BQk(),t.YNc(25,kt,1,0,"tr",14),t.YNc(26,Ft,1,0,"tr",15),t.qZA()(),t._UZ(27,"mat-paginator",16),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("ngIf",i.isLoadingResults||i.isRateLimitReached),t.xp6(2),t.Q6J("dataSource",i.leadsData),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.resultsLength)("pageSize",10))},dependencies:[u.sg,u.O5,N.XC,J.ey,N.ZL,_.KE,T.Nt,m.a8,m.dn,m.dk,I.Ou,M.NW,O.YE,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,c.Fj,c.JJ,c.oH,x.b,u.Ov],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.custom-width[_ngcontent-%COMP%]{width:180px}[_nghost-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%]{height:80%!important}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:2px!important;padding-bottom:2px!important}[_nghost-%COMP%]     .mat-mdc-form-field-infix{min-height:10px!important}"]}),e})();class Et{constructor(o){this._httpClient=o}getLeads(o,n,i){return this._httpClient.get(`${U.N.baseUrl}/leads/new-unassigned-lead?sort=${o}&order=${n}&page=${i+1}`).pipe((0,C.U)(l=>({...l,data:l.data.map((h,w)=>({...h,counter:w+1+10*i}))})))}}var v=r(8280);function jt(e,o){1&e&&t._UZ(0,"mat-spinner")}function Ht(e,o){1&e&&(t.TgZ(0,"div",34),t._uU(1," There is no leads... "),t.qZA())}function Gt(e,o){if(1&e&&(t.TgZ(0,"div",31),t.YNc(1,jt,1,0,"mat-spinner",32),t.YNc(2,Ht,2,0,"div",33),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isLoadingResults),t.xp6(1),t.Q6J("ngIf",n.isRateLimitReached)}}function zt(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1," # "),t.qZA())}function Wt(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.counter," ")}}function Kt(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Lead Subject "),t.qZA())}function Xt(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.lead_title||"Invalid Title"," ")}}function Vt(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Name "),t.qZA())}function te(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_name||"Invalid Name"," ")}}function ee(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Email"),t.qZA())}function ne(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_email||"Invalid Email"," ")}}function oe(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Phone "),t.qZA())}function ie(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_phone||"Invalid Phone Number"," ")}}function ae(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Date"),t.qZA())}function se(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.created_at||"Invalid Date"," ")}}function re(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1," Actions "),t.qZA())}function le(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",36)(1,"a",37),t.NdJ("click",function(a){const g=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.Delete(a,g.lead_id))}),t._UZ(2,"i-tabler",38),t.qZA()()}}function ce(e,o){1&e&&t._UZ(0,"tr",39)}function de(e,o){1&e&&t._UZ(0,"tr",40)}let ge=(()=>{class e{constructor(n,i,a,s){this._httpClient=n,this._LeadsService=i,this._http=a,this._router=s,this.displayedColumns=["lead_id","lead_title","customer_name","customer_email","customer_phone","date","actions"],this.exampleDatabase=null,this.leadsData=[],this.counter=1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1}ngAfterViewInit(){this.exampleDatabase=new pe(this._httpClient,this._router),this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,y.T)(this.sort.sortChange,this.paginator.page).pipe((0,L.O)({}),(0,R.w)(()=>(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.role,this.loginuserId,this.sort.active,this.sort.direction,this.paginator.pageIndex,this.startDate,this.endDate))),(0,C.U)(n=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,n.data)),(0,f.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,P.of)([])))).subscribe(n=>this.leadsData=n))}ngOnInit(){this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.loginuserId=this.user.client_user_id,this.role=this.user.role_id,this.agents()}Delete(n,i,a,s){p().fire({title:"Are you sure want to remove?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(g=>{g.isConfirmed&&this._LeadsService.DeleteLead(i).subscribe(l=>{"delete"===l.status&&(p().fire({title:"Success",html:"Lead Delete Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData(a,s))},l=>{(403==l.status||403===l.status)&&this._router.navigate(["error"])})})}reloadData(n,i){this.sort&&this.paginator&&(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.role,this.loginuserId,this.sort.active,this.sort.direction,this.paginator.pageIndex,n,i).pipe((0,f.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,P.of)([])))).subscribe(a=>{"data"in a&&(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=a.total_count,this.leadsData=a.data,console.log("ddddd"),console.log(this.leadsData))}))}exportToCSV(n,i){if(this.leadsData&&this.leadsData.length>0){const a=new FormData;""!==n&&a.append("startDate",n),""!==i&&a.append("endDate",i),""!==this.loginuserId&&a.append("login_user_id",this.loginuserId),""!==this.role&&a.append("user_role",this.role),this._LeadsService.FilterCsv(a).subscribe(s=>{window.open(s.data)},s=>{(403==s.status||403===s.status)&&this._router.navigate(["error"])})}}agents(){this._LeadsService.getAgentInfo().subscribe(n=>{this.allAgents=n},n=>{(403==n.status||403===n.status)&&this._router.navigate(["error"])})}displayLeadLabel(n){return n?n.client_user_name:""}filter(n,i){this.reloadData(n,i)}reload(){window.location.reload()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.eN),t.Y36(A.C),t.Y36(Z.eN),t.Y36(b.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-my-lead"]],viewQuery:function(n,i){if(1&n&&(t.Gf(M.NW,5),t.Gf(O.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},decls:54,vars:8,consts:[[1,"cardWithShadow"],[1,"row"],[1,"offset-6","col-lg-3"],["appearance","outline",1,"w-100"],[3,"rangePicker"],["matStartDate","","placeholder","Start date"],["startDateInput",""],["matEndDate","","placeholder","End date"],["endDateInput",""],["matIconSuffix","",3,"for"],["custompicker",""],[1,"col-lg-3"],[1,"btnDiv",2,"margin-top","4px"],["mat-flat-button","","color","primary",2,"border-radius","0px",3,"click"],["mat-flat-button","","color","warn",2,"border-radius","0px",3,"click"],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","lead_id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lead_title"],["matColumnDef","customer_name"],["matColumnDef","customer_email"],["matColumnDef","customer_phone"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],[1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-header-row",""],["mat-row",""]],template:function(n,i){if(1&n){const a=t.EpF();t.TgZ(0,"mat-card",0),t._UZ(1,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Enter a date range"),t.qZA(),t.TgZ(8,"mat-date-range-input",4),t._UZ(9,"input",5,6)(11,"input",7,8),t.qZA(),t._UZ(13,"mat-datepicker-toggle",9)(14,"mat-date-range-picker",null,10),t.qZA()(),t.TgZ(16,"div",11)(17,"div",12)(18,"button",13),t.NdJ("click",function(){t.CHM(a);const g=t.MAs(10),l=t.MAs(12);return t.KtG(i.filter(g.value,l.value))}),t._uU(19,"Filter"),t.qZA(),t._uU(20," \xa0 "),t.TgZ(21,"button",14),t.NdJ("click",function(){return i.reload()}),t._uU(22,"Reset"),t.qZA(),t._uU(23," \xa0 "),t.TgZ(24,"button",14),t.NdJ("click",function(){t.CHM(a);const g=t.MAs(10),l=t.MAs(12);return t.KtG(i.exportToCSV(g.value,l.value))}),t._uU(25,"Export CSV"),t.qZA()()()(),t.TgZ(26,"div",15),t.YNc(27,Gt,3,2,"div",16),t.TgZ(28,"div",17)(29,"table",18),t.ynx(30,19),t.YNc(31,zt,2,0,"th",20),t.YNc(32,Wt,2,1,"td",21),t.BQk(),t.ynx(33,22),t.YNc(34,Kt,2,0,"th",20),t.YNc(35,Xt,2,1,"td",21),t.BQk(),t.ynx(36,23),t.YNc(37,Vt,2,0,"th",20),t.YNc(38,te,2,1,"td",21),t.BQk(),t.ynx(39,24),t.YNc(40,ee,2,0,"th",20),t.YNc(41,ne,2,1,"td",21),t.BQk(),t.ynx(42,25),t.YNc(43,oe,2,0,"th",20),t.YNc(44,ie,2,1,"td",21),t.BQk(),t.ynx(45,26),t.YNc(46,ae,2,0,"th",20),t.YNc(47,se,2,1,"td",21),t.BQk(),t.ynx(48,27),t.YNc(49,re,2,0,"th",20),t.YNc(50,le,3,0,"td",21),t.BQk(),t.YNc(51,ce,1,0,"tr",28),t.YNc(52,de,1,0,"tr",29),t.qZA()(),t._UZ(53,"mat-paginator",30),t.qZA()()()}if(2&n){const a=t.MAs(15);t.xp6(8),t.Q6J("rangePicker",a),t.xp6(5),t.Q6J("for",a),t.xp6(14),t.Q6J("ngIf",i.isLoadingResults||i.isRateLimitReached),t.xp6(2),t.Q6J("dataSource",i.leadsData),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.resultsLength)("pageSize",10)}},dependencies:[u.O5,v.nW,v.wx,v.zY,v.By,v._g,_.KE,_.hX,_.R9,m.a8,m.dn,m.dk,q.lW,I.Ou,M.NW,O.YE,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,x.b],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.custom-width[_ngcontent-%COMP%]{width:180px}[_nghost-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%]{height:80%!important}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:2px!important;padding-bottom:2px!important}[_nghost-%COMP%]     .mat-mdc-form-field-infix{min-height:10px!important}[_nghost-%COMP%]     .mat-date-range-input-container{padding-top:10px}"]}),e})();class pe{constructor(o,n){this._httpClient=o,this._router=n}getLeads(o,n,i,a,s,g,l){let w=`${U.N.baseUrl}/leads/get-my-lead`,Y=(new Z.LE).set("sort",i).set("order",a).set("page",(s+1).toString());return g&&l&&(Y=Y.set("startDate",g).set("endDate",l)),this._httpClient.get(`${w}`,{params:Y}).pipe((0,C.U)(D=>({...D,data:D.data.map((Oe,Pe)=>({...Oe,counter:Pe+1+10*s}))})),(0,f.K)(D=>(this._router.navigate(["/error"]),(0,Q._)(D))))}}const me=[{path:"",children:[{path:"create-lead",component:ot,data:{title:"Lead Managements",urls:[{title:"Dashboard",url:"/leads/create-lead"},{title:"Lead Managements"}]}},{path:"assign-lead",component:$t,data:{title:"Assign Leads",urls:[{title:"Dashboard",url:"/leads/assign-lead"},{title:"Assign Leads"}]}},{path:"re-assign",component:bt,data:{title:"Re-Assign Leads",urls:[{title:"Dashboard",url:"/leads/re-assign"},{title:"Re-Assign Leads"}]}},{path:"my-lead",component:ge,data:{title:"My Leads",urls:[{title:"Dashboard",url:"/leads/my-lead"},{title:"My Leads"}]}}]}];var ue=r(9549),_e=r(832),he=r(5664),fe=r(3669),Ce=r(4333);let xe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[u.uU],imports:[u.ez,b.Bz.forChild(me),ue.q,c.u5,_e.FormModule,c.UX,x.e,x.e.pick(he),T.c,fe.A0,Ce.JX,v.FA]}),e})()}}]);