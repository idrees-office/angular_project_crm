"use strict";(self.webpackChunkModernize=self.webpackChunkModernize||[]).push([[645],{5645:(Pe,I,r)=>{r.r(I),r.d(I,{LeadsModule:()=>Ce});var _=r(4755),S=r(6873),g=r(9401),J=r(5226),m=r.n(J),t=r(2223),Z=r(620),u=r(9114),w=r(8097),p=r(6012),Y=r(1728),k=r(430),h=r(792);function B(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," Title is required. "),t.qZA())}function F(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,B,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.lead_title.errors&&n.f.lead_title.errors.required)}}function $(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," ClientName is required. "),t.qZA())}function E(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," ClientName is too short. "),t.qZA())}function j(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,$,2,0,"div",26),t.YNc(2,E,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.customer_name.errors&&n.f.customer_name.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.customer_name.errors&&n.f.customer_name.errors.minlength)}}function H(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," Email is required. "),t.qZA())}function G(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," Please Enter the Valid email. "),t.qZA())}function z(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,H,2,0,"div",26),t.YNc(2,G,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.customer_email.errors&&n.f.customer_email.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.customer_email.errors&&n.f.customer_email.errors.email)}}function W(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," PhoneNumber is required. "),t.qZA())}function X(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1,' "Please enter a valid phone number with a code starting with +. '),t.qZA())}function K(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,W,2,0,"div",26),t.YNc(2,X,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.customer_phone.errors&&n.f.customer_phone.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.customer_phone.errors&&n.f.customer_phone.errors.pattern)}}function V(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1," PhoneNumber is required. "),t.qZA())}function tt(e,o){1&e&&(t.TgZ(0,"div",27),t._uU(1,' "Please enter a valid phone number with a code starting with +. '),t.qZA())}function et(e,o){if(1&e&&(t.TgZ(0,"mat-hint",25),t.YNc(1,V,2,0,"div",26),t.YNc(2,tt,2,0,"div",26),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.customer_phone2.errors&&n.f.customer_phone2.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.customer_phone2.errors&&n.f.customer_phone2.errors.pattern)}}let nt=(()=>{class e{constructor(n,a,i){this.LeadsService=n,this.router=a,this.fb=i,this.filteredAgents=[],this.agentIdControl=new g.NI}ngOnInit(){this.leadForm=this.fb.group({lead_title:new g.NI("",[g.kI.required]),customer_name:new g.NI("",[g.kI.required,g.kI.minLength(4)]),customer_phone:new g.NI("",[g.kI.required,g.kI.pattern(/^\+(?:[0-9] ?){6,14}[0-9]$/)]),customer_phone2:new g.NI("",[g.kI.required,g.kI.pattern(/^\+(?:[0-9] ?){6,14}[0-9]$/)]),customer_email:new g.NI("",[g.kI.required,g.kI.email]),customer_position:new g.NI(""),lead_comments:new g.NI("")}),this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.loginuserId=this.user.client_user_id,this.role=this.user.client_user_role}submitForm(n){if(!this.leadForm.invalid&&this.leadForm.valid){const a=new FormData,i=this.leadForm.value;a.append("login_user_id",1==this.role||1===this.role?this.loginuserId:"empty"),a.append("lead_title",i.lead_title),a.append("agent_id",i.agent_id),a.append("customer_name",i.customer_name),a.append("customer_phone",i.customer_phone),a.append("customer_email",i.customer_email),a.append("customer_position",i.customer_position),a.append("customer_phone2",i.customer_phone2),a.append("lead_comments",i.lead_comments),this.LeadsService.createLead(a).subscribe(s=>{"success"===s.status&&(m().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:"Create Lead Successfully",icon:"success"}),this.leadForm.reset(),this.router.navigate(["/leads/assign-lead"]))})}}onAgentChange(n){const a=this.leadForm.get("agent_id")?.value;this.LeadsService.AgentNameById(a).subscribe(i=>{i&&i.length>0?this.selectedAgentName=""===i[0].client_user_name?"empty":i[0].client_user_name:alert("Could Not find Any User")},i=>{console.error("Error fetching agent name:",i),alert("An error occurred while fetching agent name")})}filterAgents(n){const a=n.target.value;"string"==typeof a&&(this.allAgents=this.allAgents.filter(i=>i.client_user_name.toLowerCase().includes(a.toLowerCase())))}get f(){return this.leadForm.controls}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.C),t.Y36(S.F0),t.Y36(g.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-create-lead"]],decls:80,vars:6,consts:[[1,"row"],[1,"col-lg-4"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"b-t-1"],["id","leadForm","enctype","multipart/form-data",3,"formGroup","ngSubmit"],[1,"col-sm-12","d-flex","align-items-center"],[1,"mat-subtitle-2","f-w-600","d-block","m-b-16"],[1,"col-sm-12"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Lead Title #XXXXXX","formControlName","lead_title",2,"border-radius","0px"],["matPrefix","",1,"op-5"],["name","user",1,"icon-20","d-flex"],["class","m-b-16 error-msg",4,"ngIf"],["matInput","","placeholder","john.deo","type","text","formControlName","customer_name"],["name","mail",1,"icon-20","d-flex"],["matInput","","placeholder","john.deo","type","email","formControlName","customer_email"],["matInput","","placeholder","123 4561 123","formControlName","customer_phone"],["name","phone",1,"icon-20","d-flex"],["matInput","","placeholder","123 4561 123","formControlName","customer_phone2"],["matInput","","placeholder","Position","formControlName","customer_position"],["rows","5","formControlName","lead_comments","matInput","","placeholder","Hi, Do you have a moment to talk Deo ?"],["name","message-2",1,"icon-20","d-flex"],[1,"row","justify-content-end"],["mat-flat-button","","color","primary"],[1,"m-b-16","error-msg"],["class","text-error",4,"ngIf"],[1,"text-error"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title",3),t._uU(5,"Create Leads"),t.qZA()(),t.TgZ(6,"mat-card-content",4)(7,"form",5),t.NdJ("ngSubmit",function(s){return a.submitForm(s)}),t.TgZ(8,"div",0)(9,"div",6)(10,"mat-label",7),t._uU(11,"Lead Title"),t.qZA()(),t.TgZ(12,"div",8)(13,"mat-form-field",9),t._UZ(14,"input",10),t.TgZ(15,"mat-icon",11),t._UZ(16,"i-tabler",12),t.qZA(),t.YNc(17,F,2,1,"mat-hint",13),t.qZA()()(),t.TgZ(18,"div",0)(19,"div",6)(20,"mat-label",7),t._uU(21,"Client Name"),t.qZA()(),t.TgZ(22,"div",8)(23,"mat-form-field",9),t._UZ(24,"input",14),t.TgZ(25,"mat-icon",11),t._UZ(26,"i-tabler",15),t.qZA(),t.YNc(27,j,3,2,"mat-hint",13),t.qZA()()(),t.TgZ(28,"div",0)(29,"div",6)(30,"mat-label",7),t._uU(31,"Client Email"),t.qZA()(),t.TgZ(32,"div",8)(33,"mat-form-field",9),t._UZ(34,"input",16),t.TgZ(35,"mat-icon",11),t._UZ(36,"i-tabler",15),t.qZA(),t.YNc(37,z,3,2,"mat-hint",13),t.qZA()()(),t.TgZ(38,"div",0)(39,"div",6)(40,"mat-label",7),t._uU(41,"Client Phone"),t.qZA()(),t.TgZ(42,"div",8)(43,"mat-form-field",9),t._UZ(44,"input",17),t.TgZ(45,"mat-icon",11),t._UZ(46,"i-tabler",18),t.qZA(),t.YNc(47,K,3,2,"mat-hint",13),t.qZA()()(),t.TgZ(48,"div",0)(49,"div",6)(50,"mat-label",7),t._uU(51,"Client WhatsApp Number"),t.qZA()(),t.TgZ(52,"div",8)(53,"mat-form-field",9),t._UZ(54,"input",19),t.TgZ(55,"mat-icon",11),t._UZ(56,"i-tabler",18),t.qZA(),t.YNc(57,et,3,2,"mat-hint",13),t.qZA()()(),t.TgZ(58,"div",0)(59,"div",6)(60,"mat-label",7),t._uU(61,"Client Position (Optional)"),t.qZA()(),t.TgZ(62,"div",8)(63,"mat-form-field",9),t._UZ(64,"input",20),t.TgZ(65,"mat-icon",11),t._UZ(66,"i-tabler",12),t.qZA()()()(),t.TgZ(67,"div",0)(68,"div",6)(69,"mat-label",7),t._uU(70,"Comments"),t.qZA()(),t.TgZ(71,"div",8)(72,"mat-form-field",9),t._UZ(73,"textarea",21),t.TgZ(74,"mat-icon",11),t._UZ(75,"i-tabler",22),t.qZA()()()(),t.TgZ(76,"div",23)(77,"div",8)(78,"button",24),t._uU(79,"Send"),t.qZA()()()()()()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",a.leadForm),t.xp6(10),t.Q6J("ngIf",a.f.lead_title.touched&&a.f.lead_title.invalid),t.xp6(10),t.Q6J("ngIf",a.f.customer_name.touched&&a.f.customer_name.invalid),t.xp6(10),t.Q6J("ngIf",a.f.customer_email.touched&&a.f.customer_email.invalid),t.xp6(10),t.Q6J("ngIf",a.f.customer_phone.touched&&a.f.customer_phone.invalid),t.xp6(10),t.Q6J("ngIf",a.f.customer_phone2.touched&&a.f.customer_phone2.invalid))},dependencies:[_.O5,u.KE,u.hX,u.bx,u.qo,w.Nt,p.a8,p.dn,p.dk,p.n5,Y.lW,k.Hw,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u,h.b],styles:[".ng-select.ng-select-opened[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{background:#fff;border-color:#b3b3b3 #ccc #d9d9d9}.ng-select.ng-select-opened[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]:hover{box-shadow:none}.ng-select.ng-select-opened[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]   .ng-arrow[_ngcontent-%COMP%]{top:-2px;border-color:transparent transparent #999;border-width:0 5px 5px}.ng-select.ng-select-opened[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]   .ng-arrow[_ngcontent-%COMP%]:hover{border-color:transparent transparent #333}.ng-select.ng-select-opened.ng-select-top[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{border-top-right-radius:0;border-top-left-radius:0}.ng-select.ng-select-opened.ng-select-right[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.ng-select.ng-select-opened.ng-select-bottom[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{border-bottom-right-radius:0;border-bottom-left-radius:0}.ng-select.ng-select-opened.ng-select-left[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}.ng-select.ng-select-focused[_ngcontent-%COMP%]:not(.ng-select-opened) > .ng-select-container[_ngcontent-%COMP%]{border-color:#007eff;box-shadow:inset 0 1px 1px #00000013,0 0 0 3px #007eff1a}.ng-select.ng-select-disabled[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]{background-color:#f9f9f9}.ng-select[_ngcontent-%COMP%]   .ng-has-value[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{display:none}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{color:#333;background-color:#fff;border-radius:4px;border:1px solid #ccc;min-height:36px;align-items:center}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]:hover{box-shadow:0 1px #0000000f}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{align-items:center;padding-left:10px}[dir=rtl][_ngcontent-%COMP%]   .ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{padding-right:10px;padding-left:0}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{color:#999}.ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{height:36px}.ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%]{top:5px;left:0;padding-left:10px;padding-right:50px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%]{padding-right:10px;padding-left:50px}.ng-select.ng-select-multiple.ng-select-disabled[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #e6e6e6}.ng-select.ng-select-multiple.ng-select-disabled[_ngcontent-%COMP%] > .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-label[_ngcontent-%COMP%]{padding:0 5px}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{padding-top:5px;padding-left:7px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]{padding-right:7px;padding-left:0}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]{font-size:.9em;margin-bottom:5px;color:#333;background-color:#ebf5ff;border-radius:2px;margin-right:5px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value.ng-value-disabled[_ngcontent-%COMP%]{background-color:#f9f9f9}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value.ng-value-disabled[_ngcontent-%COMP%]   .ng-value-label[_ngcontent-%COMP%]{padding-left:5px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value.ng-value-disabled[_ngcontent-%COMP%]   .ng-value-label[_ngcontent-%COMP%]{padding-left:0;padding-right:5px}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-label[_ngcontent-%COMP%], .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon[_ngcontent-%COMP%]{display:inline-block;padding:1px 5px}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon[_ngcontent-%COMP%]:hover{background-color:#d1e8ff}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon.left[_ngcontent-%COMP%]{border-right:1px solid #b8dbff}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon.left[_ngcontent-%COMP%]{border-left:1px solid #b8dbff;border-right:none}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon.right[_ngcontent-%COMP%]{border-left:1px solid #b8dbff}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]   .ng-value-icon.right[_ngcontent-%COMP%]{border-left:0;border-right:1px solid #b8dbff}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%]{padding:0 0 3px 3px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%]{padding:0 3px 3px 0}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{color:#000}.ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{top:5px;padding-bottom:5px;padding-left:3px}[dir=rtl][_ngcontent-%COMP%]   .ng-select.ng-select-multiple[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{padding-right:3px;padding-left:0}.ng-select[_ngcontent-%COMP%]   .ng-clear-wrapper[_ngcontent-%COMP%]{color:#999}.ng-select[_ngcontent-%COMP%]   .ng-clear-wrapper[_ngcontent-%COMP%]:hover   .ng-clear[_ngcontent-%COMP%]{color:#d0021b}.ng-select[_ngcontent-%COMP%]   .ng-clear-wrapper[_ngcontent-%COMP%]:focus   .ng-clear[_ngcontent-%COMP%]{color:#d0021b}.ng-select[_ngcontent-%COMP%]   .ng-clear-wrapper[_ngcontent-%COMP%]:focus{outline:none}.ng-select[_ngcontent-%COMP%]   .ng-spinner-zone[_ngcontent-%COMP%]{padding:5px 5px 0 0}[dir=rtl][_ngcontent-%COMP%]   .ng-select[_ngcontent-%COMP%]   .ng-spinner-zone[_ngcontent-%COMP%]{padding:5px 0 0 5px}.ng-select[_ngcontent-%COMP%]   .ng-arrow-wrapper[_ngcontent-%COMP%]{width:25px;padding-right:5px}[dir=rtl][_ngcontent-%COMP%]   .ng-select[_ngcontent-%COMP%]   .ng-arrow-wrapper[_ngcontent-%COMP%]{padding-left:5px;padding-right:0}.ng-select[_ngcontent-%COMP%]   .ng-arrow-wrapper[_ngcontent-%COMP%]:hover   .ng-arrow[_ngcontent-%COMP%]{border-top-color:#666}.ng-select[_ngcontent-%COMP%]   .ng-arrow-wrapper[_ngcontent-%COMP%]   .ng-arrow[_ngcontent-%COMP%]{border-color:#999 transparent transparent;border-style:solid;border-width:5px 5px 2.5px}.ng-dropdown-panel[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;box-shadow:0 1px #0000000f;left:0}.ng-dropdown-panel.ng-select-top[_ngcontent-%COMP%]{bottom:100%;border-top-right-radius:4px;border-top-left-radius:4px;border-bottom-color:#e6e6e6;margin-bottom:-1px}.ng-dropdown-panel.ng-select-top[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.ng-dropdown-panel.ng-select-right[_ngcontent-%COMP%]{left:100%;top:0;border-top-right-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;border-bottom-color:#e6e6e6;margin-bottom:-1px}.ng-dropdown-panel.ng-select-right[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:first-child{border-top-right-radius:4px}.ng-dropdown-panel.ng-select-bottom[_ngcontent-%COMP%]{top:100%;border-bottom-right-radius:4px;border-bottom-left-radius:4px;border-top-color:#e6e6e6;margin-top:-1px}.ng-dropdown-panel.ng-select-bottom[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.ng-dropdown-panel.ng-select-left[_ngcontent-%COMP%]{left:-100%;top:0;border-top-left-radius:4px;border-bottom-right-radius:4px;border-bottom-left-radius:4px;border-bottom-color:#e6e6e6;margin-bottom:-1px}.ng-dropdown-panel.ng-select-left[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:first-child{border-top-left-radius:4px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-header[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;padding:5px 7px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-footer[_ngcontent-%COMP%]{border-top:1px solid #ccc;padding:5px 7px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;padding:8px 10px;font-weight:500;color:#0000008a;cursor:pointer}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup.ng-option-disabled[_ngcontent-%COMP%]{cursor:default}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup.ng-option-marked[_ngcontent-%COMP%]{background-color:#f5faff}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup.ng-option-selected[_ngcontent-%COMP%], .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-optgroup.ng-option-selected.ng-option-marked[_ngcontent-%COMP%]{color:#0000008a;background-color:#ebf5ff;font-weight:600}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]{background-color:#fff;color:#000000de;padding:8px 10px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-selected[_ngcontent-%COMP%], .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-selected.ng-option-marked[_ngcontent-%COMP%]{color:#333;background-color:#ebf5ff}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-selected[_ngcontent-%COMP%]   .ng-option-label[_ngcontent-%COMP%], .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-selected.ng-option-marked[_ngcontent-%COMP%]   .ng-option-label[_ngcontent-%COMP%]{font-weight:600}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-marked[_ngcontent-%COMP%]{background-color:#f5faff;color:#333}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-disabled[_ngcontent-%COMP%]{color:#ccc}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-child[_ngcontent-%COMP%]{padding-left:22px}[dir=rtl][_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option.ng-option-child[_ngcontent-%COMP%]{padding-right:22px;padding-left:0}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]   .ng-tag-label[_ngcontent-%COMP%]{font-size:80%;font-weight:400;padding-right:5px}[dir=rtl][_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]   .ng-tag-label[_ngcontent-%COMP%]{padding-left:5px;padding-right:0}[dir=rtl][_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{direction:rtl;text-align:right}  .mat-form-field-appearance-outline .mat-form-field-outline{border-radius:0}  .mat-form-field-appearance-outline .mat-form-field-flex{border-radius:0}.mat-mdc-text-field-wrapper.mdc-text-field--outlined[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{height:40px}"]}),e})();var f=r(3276),C=r(2611),L=r(6451),x=r(9646),N=r(8675),D=r(3900),M=r(4004),O=r(262),y=r(9234),v=r(3144),A=r(8995),q=r(1217),R=r(8467),c=r(3627);function ot(e,o){1&e&&t._UZ(0,"mat-spinner")}function at(e,o){1&e&&(t.TgZ(0,"div",21),t._uU(1," API rate limit has been reached. It will be reset in one minute. "),t.qZA())}function it(e,o){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,ot,1,0,"mat-spinner",19),t.YNc(2,at,2,0,"div",20),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isLoadingResults),t.xp6(1),t.Q6J("ngIf",n.isRateLimitReached)}}function st(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," # "),t.qZA())}function rt(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.counter," ")}}function lt(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Lead Title "),t.qZA())}function ct(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.lead_title||"Invalid Title"," ")}}function dt(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Agent Name "),t.qZA())}function gt(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.agent_name||"Invalid Name"," ")}}function pt(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Client Name "),t.qZA())}function mt(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_name||"Invalid Name"," ")}}function ut(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Client Phone "),t.qZA())}function _t(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_phone||"Invalid Name"," ")}}function ht(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Actions "),t.qZA())}function ft(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",23)(1,"a",24),t.NdJ("click",function(i){const d=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.Delete(i,d.lead_id))}),t._UZ(2,"i-tabler",25),t.qZA()()}}function Ct(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Reassign "),t.qZA())}function xt(e,o){if(1&e&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.client_user_name,"")}}function Mt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",26)(1,"mat-form-field",27),t._UZ(2,"input",28),t.TgZ(3,"mat-autocomplete",29,30),t.NdJ("optionSelected",function(i){const d=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.onOptionSelected(i,d))}),t.YNc(5,xt,2,2,"mat-option",31),t.qZA()()()}if(2&e){const n=t.MAs(4),a=t.oxw();t.xp6(2),t.Q6J("matAutocomplete",n),t.xp6(1),t.Q6J("displayWith",a.displayLeadLabel),t.xp6(2),t.Q6J("ngForOf",a.allAgents)}}function Ot(e,o){1&e&&t._UZ(0,"tr",33)}function Pt(e,o){1&e&&t._UZ(0,"tr",34)}let bt=(()=>{class e{constructor(n,a){this._httpClient=n,this._LeadsService=a,this.displayedColumns=["lead_id","lead_title","agent_name","customer_name","customer_phone","reassign","actions"],this.exampleDatabase=null,this.leadsData=[],this.counter=1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1}ngAfterViewInit(){this.exampleDatabase=new vt(this._httpClient),this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,L.T)(this.sort.sortChange,this.paginator.page).pipe((0,N.O)({}),(0,D.w)(()=>(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex))),(0,M.U)(n=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,n.data)),(0,O.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,x.of)([])))).subscribe(n=>this.leadsData=n))}ngOnInit(){this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.loginuserId=this.user.client_user_id,this.role=this.user.client_user_role,this.agents()}Delete(n,a){m().fire({title:"Are you sure want to remove?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(i=>{i.isConfirmed&&this._LeadsService.DeleteLead(a).subscribe(s=>{"delete"===s.status&&(m().fire({title:"Success",html:"Lead Delete Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},s=>{console.log(s)})})}reloadData(){this.sort&&this.paginator&&(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex).pipe((0,O.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,x.of)([])))).subscribe(n=>{"data"in n&&(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,this.leadsData=n.data)}))}agents(){this._LeadsService.getAgentInfo().subscribe(n=>{this.allAgents=n},n=>{console.log(n)})}onOptionSelected(n,a){m().fire({html:"Are you sure want to Re-assign?",showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(i=>{if(i.isConfirmed){this.reassignLeadSelectedAgent=n.option.value;const d=a.lead_id;if(""!=this.reassignLeadSelectedAgent&&""!=d){var s=new FormData;this.loginuserId&&s.append("login_user_id",this.loginuserId),s.append("agent_id",this.reassignLeadSelectedAgent.client_user_id),s.append("lead_id",d),this._LeadsService.ReAssignLeads(s).subscribe(l=>{"success"===l.status&&(m().fire({title:"Success",html:"Lead Re-assigned Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},l=>{console.log(l)})}else alert("SomeThing Wrong")}})}displayLeadLabel(n){return n?n.client_user_name:""}Reassign(n,a){""!=a&&m().fire({html:"Are you sure want to Re-assign?",showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(i=>{i.isConfirmed&&alert("Open Modal")})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.eN),t.Y36(Z.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-re-assign"]],viewQuery:function(n,a){if(1&n&&(t.Gf(f.NW,5),t.Gf(C.YE,5)),2&n){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},decls:31,vars:6,consts:[[1,"cardWithShadow"],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","lead_id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lead_title"],["matColumnDef","agent_name"],["matColumnDef","customer_name"],["matColumnDef","customer_phone"],["matColumnDef","actions"],["matColumnDef","reassign"],["mat-cell","","style","width: 50px;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],[1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-cell","",2,"width","50px"],["appearance","outline",1,"custom-width","mt-5"],["type","text","placeholder","Select Agent","aria-label","Number","matInput","",3,"matAutocomplete"],[3,"displayWith","optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(t.TgZ(0,"mat-card",0),t._UZ(1,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",1),t.YNc(4,it,3,2,"div",2),t.TgZ(5,"div",3)(6,"table",4),t.ynx(7,5),t.YNc(8,st,2,0,"th",6),t.YNc(9,rt,2,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,lt,2,0,"th",6),t.YNc(12,ct,2,1,"td",7),t.BQk(),t.ynx(13,9),t.YNc(14,dt,2,0,"th",6),t.YNc(15,gt,2,1,"td",7),t.BQk(),t.ynx(16,10),t.YNc(17,pt,2,0,"th",6),t.YNc(18,mt,2,1,"td",7),t.BQk(),t.ynx(19,11),t.YNc(20,ut,2,0,"th",6),t.YNc(21,_t,2,1,"td",7),t.BQk(),t.ynx(22,12),t.YNc(23,ht,2,0,"th",6),t.YNc(24,ft,3,0,"td",7),t.BQk(),t.ynx(25,13),t.YNc(26,Ct,2,0,"th",6),t.YNc(27,Mt,6,3,"td",14),t.BQk(),t.YNc(28,Ot,1,0,"tr",15),t.YNc(29,Pt,1,0,"tr",16),t.qZA()(),t._UZ(30,"mat-paginator",17),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("ngIf",a.isLoadingResults||a.isRateLimitReached),t.xp6(2),t.Q6J("dataSource",a.leadsData),t.xp6(22),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.resultsLength)("pageSize",10))},dependencies:[_.sg,_.O5,A.XC,q.ey,A.ZL,u.KE,w.Nt,p.a8,p.dn,p.dk,R.Ou,f.NW,C.YE,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,h.b],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.custom-width[_ngcontent-%COMP%]{width:180px}[_nghost-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%]{height:80%!important}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:2px!important;padding-bottom:2px!important}[_nghost-%COMP%]     .mat-mdc-form-field-infix{min-height:10px!important}"]}),e})();class vt{constructor(o){this._httpClient=o}getLeads(o,n,a){return this._httpClient.get(`${y.N.baseUrl}/leads/reassign-lead-list?sort=${o}&order=${n}&page=${a+1}`).pipe((0,M.U)(l=>({...l,data:l.data.map((T,b)=>({...T,counter:b+1+10*a}))})))}}function Zt(e,o){1&e&&t._UZ(0,"mat-spinner")}function wt(e,o){1&e&&(t.TgZ(0,"div",20),t._uU(1," API rate limit has been reached. It will be reset in one minute. "),t.qZA())}function At(e,o){if(1&e&&(t.TgZ(0,"div",17),t.YNc(1,Zt,1,0,"mat-spinner",18),t.YNc(2,wt,2,0,"div",19),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isLoadingResults),t.xp6(1),t.Q6J("ngIf",n.isRateLimitReached)}}function Tt(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," # "),t.qZA())}function Lt(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.counter," ")}}function Nt(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," Lead Title "),t.qZA())}function Dt(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.lead_title||"Invalid Title"," ")}}function yt(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Client Name "),t.qZA())}function Rt(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_name||"Invalid Name"," ")}}function Ut(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Client Phone "),t.qZA())}function It(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_phone||"Invalid Name"," ")}}function St(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," Actions "),t.qZA())}function Yt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",22)(1,"a",23),t.NdJ("click",function(i){const d=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.Delete(i,d.lead_id))}),t._UZ(2,"i-tabler",24),t.qZA()()}}function qt(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," Reassign "),t.qZA())}function Qt(e,o){if(1&e&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.client_user_name,"")}}function Jt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",25)(1,"mat-form-field",26),t._UZ(2,"input",27),t.TgZ(3,"mat-autocomplete",28,29),t.NdJ("optionSelected",function(i){const d=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.onOptionSelected(i,d))}),t.YNc(5,Qt,2,2,"mat-option",30),t.qZA()()()}if(2&e){const n=t.MAs(4),a=t.oxw();t.xp6(2),t.Q6J("matAutocomplete",n),t.xp6(1),t.Q6J("displayWith",a.displayLeadLabel),t.xp6(2),t.Q6J("ngForOf",a.allAgents)}}function kt(e,o){1&e&&t._UZ(0,"tr",32)}function Bt(e,o){1&e&&t._UZ(0,"tr",33)}let Ft=(()=>{class e{constructor(n,a){this._httpClient=n,this._LeadsService=a,this.displayedColumns=["lead_id","lead_title","customer_name","customer_phone","reassign","actions"],this.exampleDatabase=null,this.leadsData=[],this.counter=1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1}ngAfterViewInit(){this.exampleDatabase=new $t(this._httpClient),this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,L.T)(this.sort.sortChange,this.paginator.page).pipe((0,N.O)({}),(0,D.w)(()=>(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex))),(0,M.U)(n=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,n.data)),(0,O.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,x.of)([])))).subscribe(n=>this.leadsData=n))}ngOnInit(){this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.loginuserId=this.user.client_user_id,this.role=this.user.client_user_role,this.agents()}Delete(n,a){m().fire({title:"Are you sure want to remove?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(i=>{i.isConfirmed&&this._LeadsService.DeleteLead(a).subscribe(s=>{"delete"===s.status&&(m().fire({title:"Success",html:"Lead Delete Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},s=>{console.log(s)})})}reloadData(){this.sort&&this.paginator&&(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex).pipe((0,O.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,x.of)([])))).subscribe(n=>{"data"in n&&(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,this.leadsData=n.data)}))}agents(){this._LeadsService.getAgentInfo().subscribe(n=>{this.allAgents=n},n=>{console.log(n)})}onOptionSelected(n,a){m().fire({html:"Are you sure want to Assign?",showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(i=>{if(i.isConfirmed){this.reassignLeadSelectedAgent=n.option.value;const d=a.lead_id;if(""!=this.reassignLeadSelectedAgent&&""!=d){var s=new FormData;s.append("agent_id",this.reassignLeadSelectedAgent.client_user_id),s.append("lead_id",d),this.loginuserId&&s.append("login_user_id",this.loginuserId),this._LeadsService.AssignLeads(s).subscribe(l=>{"success"===l.status&&(m().fire({title:"Success",html:"Lead Re-assigned Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},l=>{console.log(l)})}else alert("SomeThing Wrong")}})}displayLeadLabel(n){return n?n.client_user_name:""}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.eN),t.Y36(Z.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-assign-lead"]],viewQuery:function(n,a){if(1&n&&(t.Gf(f.NW,5),t.Gf(C.YE,5)),2&n){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},decls:28,vars:6,consts:[[1,"cardWithShadow"],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","lead_id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lead_title"],["matColumnDef","customer_name"],["matColumnDef","customer_phone"],["matColumnDef","actions"],["matColumnDef","reassign"],["mat-cell","","style","width: 50px;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],[1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-cell","",2,"width","50px"],["appearance","outline",1,"custom-width","mt-5"],["type","text","placeholder","Select Agent","aria-label","Number","matInput","",3,"matAutocomplete"],[3,"displayWith","optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(t.TgZ(0,"mat-card",0),t._UZ(1,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",1),t.YNc(4,At,3,2,"div",2),t.TgZ(5,"div",3)(6,"table",4),t.ynx(7,5),t.YNc(8,Tt,2,0,"th",6),t.YNc(9,Lt,2,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,Nt,2,0,"th",6),t.YNc(12,Dt,2,1,"td",7),t.BQk(),t.ynx(13,9),t.YNc(14,yt,2,0,"th",6),t.YNc(15,Rt,2,1,"td",7),t.BQk(),t.ynx(16,10),t.YNc(17,Ut,2,0,"th",6),t.YNc(18,It,2,1,"td",7),t.BQk(),t.ynx(19,11),t.YNc(20,St,2,0,"th",6),t.YNc(21,Yt,3,0,"td",7),t.BQk(),t.ynx(22,12),t.YNc(23,qt,2,0,"th",6),t.YNc(24,Jt,6,3,"td",13),t.BQk(),t.YNc(25,kt,1,0,"tr",14),t.YNc(26,Bt,1,0,"tr",15),t.qZA()(),t._UZ(27,"mat-paginator",16),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("ngIf",a.isLoadingResults||a.isRateLimitReached),t.xp6(2),t.Q6J("dataSource",a.leadsData),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.resultsLength)("pageSize",10))},dependencies:[_.sg,_.O5,A.XC,q.ey,A.ZL,u.KE,w.Nt,p.a8,p.dn,p.dk,R.Ou,f.NW,C.YE,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,h.b],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.custom-width[_ngcontent-%COMP%]{width:180px}[_nghost-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%]{height:80%!important}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:2px!important;padding-bottom:2px!important}[_nghost-%COMP%]     .mat-mdc-form-field-infix{min-height:10px!important}"]}),e})();class $t{constructor(o){this._httpClient=o}getLeads(o,n,a){return this._httpClient.get(`${y.N.baseUrl}/leads/new-unassigned-lead?sort=${o}&order=${n}&page=${a+1}`).pipe((0,M.U)(l=>({...l,data:l.data.map((T,b)=>({...T,counter:b+1+10*a}))})))}}var P=r(8280);function Et(e,o){1&e&&t._UZ(0,"mat-spinner")}function jt(e,o){1&e&&(t.TgZ(0,"div",34),t._uU(1," There is no leads... "),t.qZA())}function Ht(e,o){if(1&e&&(t.TgZ(0,"div",31),t.YNc(1,Et,1,0,"mat-spinner",32),t.YNc(2,jt,2,0,"div",33),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isLoadingResults),t.xp6(1),t.Q6J("ngIf",n.isRateLimitReached)}}function Gt(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1," # "),t.qZA())}function zt(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.counter," ")}}function Wt(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Lead Subject "),t.qZA())}function Xt(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.lead_title||"Invalid Title"," ")}}function Kt(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Name "),t.qZA())}function Vt(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_name||"Invalid Name"," ")}}function te(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Email"),t.qZA())}function ee(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_email||"Invalid Email"," ")}}function ne(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Phone "),t.qZA())}function oe(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.customer_phone||"Invalid Phone Number"," ")}}function ae(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Date"),t.qZA())}function ie(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.created_at||"Invalid Date"," ")}}function se(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1," Actions "),t.qZA())}function re(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",36)(1,"a",37),t.NdJ("click",function(i){const d=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.Delete(i,d.lead_id))}),t._UZ(2,"i-tabler",38),t.qZA()()}}function le(e,o){1&e&&t._UZ(0,"tr",39)}function ce(e,o){1&e&&t._UZ(0,"tr",40)}let de=(()=>{class e{constructor(n,a,i){this._httpClient=n,this._LeadsService=a,this._http=i,this.displayedColumns=["lead_id","lead_title","customer_name","customer_email","customer_phone","date","actions"],this.exampleDatabase=null,this.leadsData=[],this.counter=1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1}ngAfterViewInit(){this.exampleDatabase=new ge(this._httpClient),this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,L.T)(this.sort.sortChange,this.paginator.page).pipe((0,N.O)({}),(0,D.w)(()=>(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.role,this.loginuserId,this.sort.active,this.sort.direction,this.paginator.pageIndex,this.startDate,this.endDate))),(0,M.U)(n=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=n.total_count,n.data)),(0,O.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,x.of)([])))).subscribe(n=>this.leadsData=n))}ngOnInit(){this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.loginuserId=this.user.client_user_id,this.role=this.user.client_user_role,this.agents()}Delete(n,a,i,s){m().fire({title:"Are you sure want to remove?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(d=>{d.isConfirmed&&this._LeadsService.DeleteLead(a).subscribe(l=>{"delete"===l.status&&(m().fire({title:"Success",html:"Lead Delete Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData(i,s))},l=>{console.log(l)})})}reloadData(n,a){this.sort&&this.paginator&&(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.role,this.loginuserId,this.sort.active,this.sort.direction,this.paginator.pageIndex,n,a).pipe((0,O.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,x.of)([])))).subscribe(i=>{"data"in i&&(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=i.total_count,this.leadsData=i.data,console.log("ddddd"),console.log(this.leadsData))}))}exportToCSV(n,a){if(this.leadsData&&this.leadsData.length>0){const i=new FormData;""!==n&&i.append("startDate",n),""!==a&&i.append("endDate",a),""!==this.loginuserId&&i.append("login_user_id",this.loginuserId),""!==this.role&&i.append("user_role",this.role),this._LeadsService.FilterCsv(i).subscribe(s=>{window.open(s.data)})}}agents(){this._LeadsService.getAgentInfo().subscribe(n=>{this.allAgents=n},n=>{console.log(n)})}displayLeadLabel(n){return n?n.client_user_name:""}filter(n,a){this.reloadData(n,a)}reload(){window.location.reload()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.eN),t.Y36(Z.C),t.Y36(v.eN))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-my-lead"]],viewQuery:function(n,a){if(1&n&&(t.Gf(f.NW,5),t.Gf(C.YE,5)),2&n){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},decls:54,vars:8,consts:[[1,"cardWithShadow"],[1,"row"],[1,"offset-6","col-lg-3"],["appearance","outline",1,"w-100"],[3,"rangePicker"],["matStartDate","","placeholder","Start date"],["startDateInput",""],["matEndDate","","placeholder","End date"],["endDateInput",""],["matIconSuffix","",3,"for"],["custompicker",""],[1,"col-lg-3"],[1,"btnDiv",2,"margin-top","4px"],["mat-flat-button","","color","primary",2,"border-radius","0px",3,"click"],["mat-flat-button","","color","warn",2,"border-radius","0px",3,"click"],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","lead_id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lead_title"],["matColumnDef","customer_name"],["matColumnDef","customer_email"],["matColumnDef","customer_phone"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],[1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-header-row",""],["mat-row",""]],template:function(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-card",0),t._UZ(1,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Enter a date range"),t.qZA(),t.TgZ(8,"mat-date-range-input",4),t._UZ(9,"input",5,6)(11,"input",7,8),t.qZA(),t._UZ(13,"mat-datepicker-toggle",9)(14,"mat-date-range-picker",null,10),t.qZA()(),t.TgZ(16,"div",11)(17,"div",12)(18,"button",13),t.NdJ("click",function(){t.CHM(i);const d=t.MAs(10),l=t.MAs(12);return t.KtG(a.filter(d.value,l.value))}),t._uU(19,"Filter"),t.qZA(),t._uU(20," \xa0 "),t.TgZ(21,"button",14),t.NdJ("click",function(){return a.reload()}),t._uU(22,"Reset"),t.qZA(),t._uU(23," \xa0 "),t.TgZ(24,"button",14),t.NdJ("click",function(){t.CHM(i);const d=t.MAs(10),l=t.MAs(12);return t.KtG(a.exportToCSV(d.value,l.value))}),t._uU(25,"Export CSV"),t.qZA()()()(),t.TgZ(26,"div",15),t.YNc(27,Ht,3,2,"div",16),t.TgZ(28,"div",17)(29,"table",18),t.ynx(30,19),t.YNc(31,Gt,2,0,"th",20),t.YNc(32,zt,2,1,"td",21),t.BQk(),t.ynx(33,22),t.YNc(34,Wt,2,0,"th",20),t.YNc(35,Xt,2,1,"td",21),t.BQk(),t.ynx(36,23),t.YNc(37,Kt,2,0,"th",20),t.YNc(38,Vt,2,1,"td",21),t.BQk(),t.ynx(39,24),t.YNc(40,te,2,0,"th",20),t.YNc(41,ee,2,1,"td",21),t.BQk(),t.ynx(42,25),t.YNc(43,ne,2,0,"th",20),t.YNc(44,oe,2,1,"td",21),t.BQk(),t.ynx(45,26),t.YNc(46,ae,2,0,"th",20),t.YNc(47,ie,2,1,"td",21),t.BQk(),t.ynx(48,27),t.YNc(49,se,2,0,"th",20),t.YNc(50,re,3,0,"td",21),t.BQk(),t.YNc(51,le,1,0,"tr",28),t.YNc(52,ce,1,0,"tr",29),t.qZA()(),t._UZ(53,"mat-paginator",30),t.qZA()()()}if(2&n){const i=t.MAs(15);t.xp6(8),t.Q6J("rangePicker",i),t.xp6(5),t.Q6J("for",i),t.xp6(14),t.Q6J("ngIf",a.isLoadingResults||a.isRateLimitReached),t.xp6(2),t.Q6J("dataSource",a.leadsData),t.xp6(22),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.resultsLength)("pageSize",10)}},dependencies:[_.O5,P.nW,P.wx,P.zY,P.By,P._g,u.KE,u.hX,u.R9,p.a8,p.dn,p.dk,Y.lW,R.Ou,f.NW,C.YE,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,h.b],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.custom-width[_ngcontent-%COMP%]{width:180px}[_nghost-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%]{height:80%!important}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:2px!important;padding-bottom:2px!important}[_nghost-%COMP%]     .mat-mdc-form-field-infix{min-height:10px!important}[_nghost-%COMP%]     .mat-date-range-input-container{padding-top:10px}"]}),e})();class ge{constructor(o){this._httpClient=o}getLeads(o,n,a,i,s,d,l){let b=`${y.N.baseUrl}/leads/get-my-lead`;(2==o||2===o)&&(b+=`/${n}`);let U=(new v.LE).set("sort",a).set("order",i).set("page",(s+1).toString());return d&&l&&(U=U.set("startDate",d).set("endDate",l)),this._httpClient.get(`${b}`,{params:U}).pipe((0,M.U)(Q=>({...Q,data:Q.data.map((Me,Oe)=>({...Me,counter:Oe+1+10*s}))})))}}const pe=[{path:"",children:[{path:"create-lead",component:nt,data:{title:"Lead Managements",urls:[{title:"Dashboard",url:"/leads/create-lead"},{title:"Lead Managements"}]}},{path:"assign-lead",component:Ft,data:{title:"Assign Leads",urls:[{title:"Dashboard",url:"/leads/assign-lead"},{title:"Assign Leads"}]}},{path:"re-assign",component:bt,data:{title:"Re-Assign Leads",urls:[{title:"Dashboard",url:"/leads/re-assign"},{title:"Re-Assign Leads"}]}},{path:"my-lead",component:de,data:{title:"My Leads",urls:[{title:"Dashboard",url:"/leads/my-lead"},{title:"My Leads"}]}}]}];var me=r(9549),ue=r(832),_e=r(5664),he=r(3669),fe=r(4333);let Ce=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[_.uU],imports:[_.ez,S.Bz.forChild(pe),me.q,g.u5,ue.FormModule,g.UX,h.e,h.e.pick(_e),w.c,he.A0,fe.JX,P.FA]}),e})()}}]);