"use strict";(self.webpackChunkModernize=self.webpackChunkModernize||[]).push([[527],{8527:(Re,v,o)=>{o.r(v),o.d(v,{SaleModule:()=>Qe});var d=o(4755),n=o(9401),O=o(5226),w=o.n(O),e=o(2223),L=o(6801),T=o(6873),P=o(6286),b=o(9234),A=o(3144);let x=(()=>{class t{constructor(a){this.http=a,this.createsaleoffer=b.N.baseUrl+"/sale/create_sale_offer",this.genratepdf=b.N.baseUrl+"/sale/genrate_pdf"}CreateSaleOffer(a){return this.http.post(this.createsaleoffer,a)}GenratePdf(a){return this.http.post(this.genratepdf,a,{responseType:"blob"})}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(A.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Y=o(1217),h=o(8280),c=o(9114),C=o(8097),F=o(787),u=o(6012),U=o(1728),J=o(430),g=o(792);function D(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," Project Name is required. "),e.qZA())}function Q(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,D,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.project_name.errors&&a.f.project_name.errors.required)}}function R(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," Unit Number is required. "),e.qZA())}function j(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,R,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.unit_number.errors&&a.f.unit_number.errors.required)}}function k(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," Selling Price is required. "),e.qZA())}function B(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,k,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.selling_price.errors&&a.f.selling_price.errors.required)}}function G(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," BedRooms Name is required. "),e.qZA())}function M(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,G,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.bedrooms.errors&&a.f.bedrooms.errors.required)}}function $(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," Total Area is required. "),e.qZA())}function H(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,$,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.total_area.errors&&a.f.total_area.errors.required)}}function E(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," Payable Now is required. "),e.qZA())}function X(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,E,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.payable_now.errors&&a.f.payable_now.errors.required)}}function z(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," Payable Now is required. "),e.qZA())}function W(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,z,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.vat_rate.errors&&a.f.vat_rate.errors.required)}}function K(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," Payable to Seller is required "),e.qZA())}function V(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,K,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.payable_to_seller.errors&&a.f.payable_to_seller.errors.required)}}function ee(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," DLD is required "),e.qZA())}function te(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,ee,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.dld_fee.errors&&a.f.dld_fee.errors.required)}}function ae(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," NOC Fee is required "),e.qZA())}function re(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,ae,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.noc_fee.errors&&a.f.noc_fee.errors.required)}}function ie(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," Transfer Fee required "),e.qZA())}function ne(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,ie,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.trustee_fee.errors&&a.f.trustee_fee.errors.required)}}function oe(t,i){1&t&&(e.TgZ(0,"div",46),e._uU(1," Built Up is required. "),e.qZA())}function le(t,i){if(1&t&&(e.TgZ(0,"mat-hint",44),e.YNc(1,oe,2,0,"div",45),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.f.built_up_area.errors&&a.f.built_up_area.errors.required)}}function se(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"div")(1,"div",47)(2,"div",4)(3,"mat-label",5)(4,"small"),e._uU(5," Installment Date"),e.qZA()(),e.TgZ(6,"mat-form-field",6)(7,"mat-label"),e._uU(8,"Choose a date"),e.qZA(),e._UZ(9,"input",48)(10,"mat-datepicker-toggle",49)(11,"mat-datepicker",null,50),e.qZA()(),e.TgZ(13,"div",4)(14,"mat-label",51)(15,"small"),e._uU(16,"Installment Price"),e.qZA()(),e.TgZ(17,"mat-form-field",6)(18,"input",52),e.NdJ("keyup",function(){e.CHM(a);const l=e.oxw();return e.KtG(l.onPriceChange())}),e.qZA(),e.TgZ(19,"mat-icon",8),e._UZ(20,"i-tabler",9),e.qZA()()(),e.TgZ(21,"div",4)(22,"mat-label",51)(23,"small"),e._uU(24," How many Percent you are pay for example 10 %"),e.qZA()(),e.TgZ(25,"mat-form-field",6),e._UZ(26,"input",53),e.TgZ(27,"mat-icon",8),e._UZ(28,"i-tabler",9),e.qZA()()(),e.TgZ(29,"div",54)(30,"button",55),e.NdJ("click",function(){const s=e.CHM(a).index,f=e.oxw();return e.KtG(f.removeDatePriceRow(s))}),e._UZ(31,"i-tabler",56),e.qZA()()()()}if(2&t){const a=i.index,r=e.MAs(12);e.xp6(1),e.Q6J("formGroupName",a),e.xp6(8),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r)}}let fe=(()=>{class t{constructor(a,r,l,s,f){this.fb=a,this.invoiceService=r,this.router=l,this.dialog=s,this._SellofferService=f,this.selectedFile=null,this.subTotal=0,this.vat=0,this.grandTotal=0}ngOnInit(){this.saleForm=this.fb.group({project_name:new n.NI("",[n.kI.required]),unit_number:new n.NI("",[n.kI.required]),selling_price:new n.NI("",[n.kI.required]),bedrooms:new n.NI("",[n.kI.required]),total_area:new n.NI("",[n.kI.required]),built_up_area:new n.NI("",[n.kI.required]),payable_now:new n.NI("",[n.kI.required]),datePriceArray:this.fb.array([this.createDatePriceRow()]),hand_over:new n.NI(""),vat_rate:new n.NI("",[n.kI.required]),payable_to_seller:new n.NI("",[n.kI.required]),dld_fee:new n.NI("",[n.kI.required]),noc_fee:new n.NI("",[n.kI.required]),trustee_fee:new n.NI("",[n.kI.required]),property_type:new n.NI("",[n.kI.required])})}createDatePriceRow(){return this.fb.group({date:["",n.kI.required],price:["",n.kI.required],percent:["",[n.kI.required,n.kI.min(0),n.kI.max(100)]]})}upload(a){const r=a.target;r.files&&r.files.length>0&&(this.selectedFile=r.files[0],console.log(this.selectedFile))}get datePriceArray(){return this.saleForm.get("datePriceArray")}addDatePriceRow(){this.datePriceArray.push(this.createDatePriceRow())}removeDatePriceRow(a){this.datePriceArray.removeAt(a)}onPriceChange(){const a=this.saleForm.get("selling_price")?.value;if(!a)return alert("Please Enter the sale price first"),!1;const r=this.saleForm.get("payable_now")?.value;if(!r)return alert("Please Enter the Payable Price"),!1;const p=a-(this.datePriceArray.controls.map(_=>_.get("price")?.value).reduce((_,Z)=>_+(parseFloat(Z)||0),0)+r);this.saleForm?.get("hand_over")?.setValue(p)}submitForm(a){if(this.saleForm.invalid)return console.log(this.saleForm.value),void console.log("Invalide");if(this.saleForm.valid){const r=new FormData,l=this.saleForm.value;r.append("project_name",l.project_name),r.append("unit_number",l.unit_number),r.append("selling_price",l.selling_price),r.append("bedrooms",l.bedrooms),r.append("total_area",l.total_area),r.append("built_up_area",l.built_up_area),r.append("payable_now",l.payable_now),r.append("hand_over",l.hand_over),r.append("vat_rate",l.vat_rate),r.append("payable_to_seller",l.payable_to_seller),r.append("dld_fee",l.dld_fee),r.append("noc_fee",l.noc_fee),r.append("trustee_fee",l.trustee_fee),r.append("property_type",l.property_type),this.selectedFile&&r.append("image",this.selectedFile),this.datePriceArray.controls.forEach((s,f)=>{r.append(`datePriceArray[${f}][price]`,s.get("price")?.value),r.append(`datePriceArray[${f}][date]`,s.get("date")?.value),r.append(`datePriceArray[${f}][percent]`,s.get("percent")?.value)}),this._SellofferService.CreateSaleOffer(r).subscribe(s=>{"success"===s.status&&(w().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:"Create Sale Offer Successfully",icon:"success"}),this.saleForm.reset(),this.router.navigate(["/sale/list-sale-offer"]))})}}optionSelected(a){console.log(a)}get f(){return this.saleForm.controls}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(n.qu),e.Y36(L.F),e.Y36(T.F0),e.Y36(P.uw),e.Y36(x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-sale-offer"]],decls:155,vars:15,consts:[[1,"cardWithShadow"],[1,"p-24"],["id","leadForm","enctype","multipart/form-data",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-3"],[1,"mat-subtitle-2","d-block","m-b-4",2,"padding-left","6px"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Project Name #XXXXXX","formControlName","project_name",2,"border-radius","0px"],["matPrefix","",1,"op-5"],["name","user",1,"icon-20","d-flex"],["class","m-b-16 error-msg",4,"ngIf"],["matInput","","placeholder","Unit Number","formControlName","unit_number",2,"border-radius","0px"],["matInput","","placeholder","Price #00000","formControlName","selling_price",2,"border-radius","0px"],["matInput","","placeholder","BedRomm #00","type","number","formControlName","bedrooms",2,"border-radius","0px"],["matInput","","placeholder","Total Area","formControlName","total_area","type","number",2,"border-radius","0px"],["matInput","","placeholder","Payable-Now","type","number","formControlName","payable_now",2,"border-radius","0px"],["matInput","","placeholder","Payable-VAT","type","number","formControlName","vat_rate",2,"border-radius","0px"],[1,"col-sm-12",2,"margin-bottom","10px"],["for",""],["matInput","","placeholder","Payable-To-Seller","type","number","formControlName","payable_to_seller",2,"border-radius","0px"],["matInput","","placeholder","DLD-Fee","type","number","formControlName","dld_fee",2,"border-radius","0px"],[1,"col-sm-2"],["matInput","","placeholder","NOC Fee","type","number","formControlName","noc_fee",2,"border-radius","0px"],["matInput","","placeholder","Transfer Fee","type","number","formControlName","trustee_fee",2,"border-radius","0px"],[1,"mat-subtitle-2","f-w-600","m-b-8","d-block"],["value","choose","formControlName","property_type"],["value","choose"],["value","apartment"],["value","townhouse"],["value","villas"],["value","penthouse"],["matInput","","placeholder","Built-Up Area","type","number","formControlName","built_up_area",2,"border-radius","0px"],[1,"col-sm-12"],[2,"margin-top","10px",3,"formGroup"],["formArrayName","datePriceArray"],[4,"ngFor","ngForOf"],[1,"col-sm-12","d-flex","justify-content-end"],["type","button","mat-flat-button","","color","primary",3,"click"],["matInput","","placeholder","Hand-Over","readonly","","formControlName","hand_over",2,"border-radius","0px"],[1,"col-sm-12","d-flex","align-items-end","justify-content-end"],["type","file","accept",".jpg, .jpeg, .png, .webp",3,"change"],["uploadFile",""],[1,"row","justify-content-end"],["mat-flat-button","","color","primary"],[1,"m-b-16","error-msg"],["class","text-error",4,"ngIf"],[1,"text-error"],[1,"row",3,"formGroupName"],["matInput","","formControlName","date",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker2",""],[1,"mat-subtitle-2","d-block","m-b-4",2,"padding-left","5px"],["matInput","","placeholder","Price","type","number","formControlName","price",2,"border-radius","0px",3,"keyup"],["matInput","","placeholder","10","type","number","formControlName","percent",2,"border-radius","0px"],[1,"col-sm-1"],["color","warn","mat-icon-button","",1,"d-flex","justify-content-center",2,"margin-top","20px",3,"click"],["name","trash",1,"icon-18","d-flex"]],template:function(a,r){1&a&&(e.TgZ(0,"mat-card",0)(1,"mat-card-content",1)(2,"form",2),e.NdJ("ngSubmit",function(s){return r.submitForm(s)}),e.TgZ(3,"div",3)(4,"div",4)(5,"mat-label",5)(6,"small"),e._uU(7,"Project Name"),e.qZA()(),e.TgZ(8,"mat-form-field",6),e._UZ(9,"input",7),e.TgZ(10,"mat-icon",8),e._UZ(11,"i-tabler",9),e.qZA(),e.YNc(12,Q,2,1,"mat-hint",10),e.qZA()(),e.TgZ(13,"div",4)(14,"mat-label",5)(15,"small"),e._uU(16,"Unit Number"),e.qZA()(),e.TgZ(17,"mat-form-field",6),e._UZ(18,"input",11),e.TgZ(19,"mat-icon",8),e._UZ(20,"i-tabler",9),e.qZA(),e.YNc(21,j,2,1,"mat-hint",10),e.qZA()(),e.TgZ(22,"div",4)(23,"mat-label",5)(24,"small"),e._uU(25,"Selling Price"),e.qZA()(),e.TgZ(26,"mat-form-field",6),e._UZ(27,"input",12),e.TgZ(28,"mat-icon",8),e._UZ(29,"i-tabler",9),e.qZA(),e.YNc(30,B,2,1,"mat-hint",10),e.qZA()(),e.TgZ(31,"div",4)(32,"mat-label",5)(33,"small"),e._uU(34,"BedRoom"),e.qZA()(),e.TgZ(35,"mat-form-field",6),e._UZ(36,"input",13),e.TgZ(37,"mat-icon",8),e._UZ(38,"i-tabler",9),e.qZA(),e.YNc(39,M,2,1,"mat-hint",10),e.qZA()(),e.TgZ(40,"div",4)(41,"mat-label",5)(42,"small"),e._uU(43,"Total Area"),e.qZA()(),e.TgZ(44,"mat-form-field",6),e._UZ(45,"input",14),e.TgZ(46,"mat-icon",8),e._UZ(47,"i-tabler",9),e.qZA(),e.YNc(48,H,2,1,"mat-hint",10),e.qZA()(),e.TgZ(49,"div",4)(50,"mat-label",5)(51,"small"),e._uU(52,"Payable Now"),e.qZA()(),e.TgZ(53,"mat-form-field",6),e._UZ(54,"input",15),e.TgZ(55,"mat-icon",8),e._UZ(56,"i-tabler",9),e.qZA(),e.YNc(57,X,2,1,"mat-hint",10),e.qZA()(),e.TgZ(58,"div",4)(59,"mat-label",5)(60,"small"),e._uU(61," 2% Plus VAT Pay to Agency"),e.qZA()(),e.TgZ(62,"mat-form-field",6),e._UZ(63,"input",16),e.TgZ(64,"mat-icon",8),e._UZ(65,"i-tabler",9),e.qZA(),e.YNc(66,W,2,1,"mat-hint",10),e.qZA()(),e._UZ(67,"div",4)(68,"div",4),e.TgZ(69,"div",17)(70,"label",18),e._uU(71,"Payable At The Transfer..."),e.qZA(),e._UZ(72,"hr"),e.qZA(),e.TgZ(73,"div",4)(74,"mat-label",5)(75,"small"),e._uU(76,"Payable to Seller"),e.qZA()(),e.TgZ(77,"mat-form-field",6),e._UZ(78,"input",19),e.TgZ(79,"mat-icon",8),e._UZ(80,"i-tabler",9),e.qZA(),e.YNc(81,V,2,1,"mat-hint",10),e.qZA()(),e.TgZ(82,"div",4)(83,"mat-label",5)(84,"small"),e._uU(85,"DLD Fee"),e.qZA()(),e.TgZ(86,"mat-form-field",6),e._UZ(87,"input",20),e.TgZ(88,"mat-icon",8),e._UZ(89,"i-tabler",9),e.qZA(),e.YNc(90,te,2,1,"mat-hint",10),e.qZA()(),e.TgZ(91,"div",21)(92,"mat-label",5)(93,"small"),e._uU(94,"NOC Fee"),e.qZA()(),e.TgZ(95,"mat-form-field",6),e._UZ(96,"input",22),e.TgZ(97,"mat-icon",8),e._UZ(98,"i-tabler",9),e.qZA(),e.YNc(99,re,2,1,"mat-hint",10),e.qZA()(),e.TgZ(100,"div",21)(101,"mat-label",5)(102,"small"),e._uU(103,"Transfer Fee"),e.qZA()(),e.TgZ(104,"mat-form-field",6),e._UZ(105,"input",23),e.TgZ(106,"mat-icon",8),e._UZ(107,"i-tabler",9),e.qZA(),e.YNc(108,ne,2,1,"mat-hint",10),e.qZA()(),e.TgZ(109,"div",21)(110,"mat-label",24),e._uU(111," Type "),e.qZA(),e.TgZ(112,"mat-form-field",6)(113,"mat-select",25)(114,"mat-option",26),e._uU(115,"choose"),e.qZA(),e.TgZ(116,"mat-option",27),e._uU(117,"Apartment"),e.qZA(),e.TgZ(118,"mat-option",28),e._uU(119,"Townhouse"),e.qZA(),e.TgZ(120,"mat-option",29),e._uU(121,"Villas"),e.qZA(),e.TgZ(122,"mat-option",30),e._uU(123,"Penthouse"),e.qZA()()(),e.TgZ(124,"mat-form-field",6),e._UZ(125,"input",31),e.TgZ(126,"mat-icon",8),e._UZ(127,"i-tabler",9),e.qZA(),e.YNc(128,le,2,1,"mat-hint",10),e.qZA()(),e.TgZ(129,"div",32)(130,"label",18),e._uU(131,"When You Payable Remaing..."),e.qZA(),e._UZ(132,"hr"),e.qZA()(),e.TgZ(133,"div",33)(134,"div",34),e.YNc(135,se,32,3,"div",35),e.qZA(),e.TgZ(136,"div",36)(137,"button",37),e.NdJ("click",function(){return r.addDatePriceRow()}),e._uU(138,"Add Row"),e.qZA()()(),e.TgZ(139,"div",32)(140,"mat-label",5)(141,"small"),e._uU(142,"Hand-Over"),e.qZA()(),e.TgZ(143,"mat-form-field",6),e._UZ(144,"input",38),e.TgZ(145,"mat-icon",8),e._UZ(146,"i-tabler",9),e.qZA()()(),e.TgZ(147,"div",39)(148,"input",40,41),e.NdJ("change",function(s){return r.upload(s)}),e.qZA()(),e._UZ(150,"br"),e.TgZ(151,"div",42)(152,"div",32)(153,"button",43),e._uU(154,"Send"),e.qZA()()()()()()),2&a&&(e.xp6(2),e.Q6J("formGroup",r.saleForm),e.xp6(10),e.Q6J("ngIf",r.f.project_name.touched&&r.f.project_name.invalid),e.xp6(9),e.Q6J("ngIf",r.f.unit_number.touched&&r.f.unit_number.invalid),e.xp6(9),e.Q6J("ngIf",r.f.selling_price.touched&&r.f.selling_price.invalid),e.xp6(9),e.Q6J("ngIf",r.f.bedrooms.touched&&r.f.bedrooms.invalid),e.xp6(9),e.Q6J("ngIf",r.f.total_area.touched&&r.f.total_area.invalid),e.xp6(9),e.Q6J("ngIf",r.f.payable_now.touched&&r.f.payable_now.invalid),e.xp6(9),e.Q6J("ngIf",r.f.vat_rate.touched&&r.f.vat_rate.invalid),e.xp6(15),e.Q6J("ngIf",r.f.payable_to_seller.touched&&r.f.payable_to_seller.invalid),e.xp6(9),e.Q6J("ngIf",r.f.dld_fee.touched&&r.f.dld_fee.invalid),e.xp6(9),e.Q6J("ngIf",r.f.noc_fee.touched&&r.f.noc_fee.invalid),e.xp6(9),e.Q6J("ngIf",r.f.trustee_fee.touched&&r.f.trustee_fee.invalid),e.xp6(20),e.Q6J("ngIf",r.f.built_up_area.touched&&r.f.built_up_area.invalid),e.xp6(5),e.Q6J("formGroup",r.saleForm),e.xp6(2),e.Q6J("ngForOf",r.datePriceArray.controls))},dependencies:[d.sg,d.O5,Y.ey,h.Mq,h.hl,h.nW,c.KE,c.hX,c.bx,c.qo,c.R9,C.Nt,F.gD,u.a8,u.dn,U.lW,U.RK,J.Hw,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,n.x0,n.CE,g.b]}),t})();var me=o(9549),pe=o(832),de=o(3669),ce=o(4333),ue=o(5664),_e=o(6451),q=o(9646),he=o(8675),ge=o(3900),S=o(4004),N=o(262),y=o(3276),I=o(2611),Ze=o(8467),m=o(3627);function ve(t,i){1&t&&e._UZ(0,"mat-spinner")}function Te(t,i){1&t&&(e.TgZ(0,"div",19),e._uU(1," No Any sale offer "),e.qZA())}function be(t,i){if(1&t&&(e.TgZ(0,"div",16),e.YNc(1,ve,1,0,"mat-spinner",17),e.YNc(2,Te,2,0,"div",18),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.isLoadingResults),e.xp6(1),e.Q6J("ngIf",a.isRateLimitReached)}}function Ae(t,i){1&t&&(e.TgZ(0,"th",20),e._uU(1," # "),e.qZA())}function xe(t,i){if(1&t&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",a.counter," ")}}function Ce(t,i){1&t&&(e.TgZ(0,"th",20),e._uU(1," Project Name "),e.qZA())}function Ue(t,i){if(1&t&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",a.project_name||"Invalid Name"," ")}}function qe(t,i){1&t&&(e.TgZ(0,"th",20),e._uU(1," Selling Price ( "),e.TgZ(2,"small"),e._uU(3,"AED"),e.qZA(),e._uU(4," ) "),e.qZA())}function Se(t,i){if(1&t&&(e.TgZ(0,"td",21),e._uU(1),e.ALo(2,"number"),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,a.selling_price,"1.2-2")," ")}}function Ne(t,i){1&t&&(e.TgZ(0,"th",20),e._uU(1,"Total Area ("),e.TgZ(2,"small"),e._uU(3,"SQFT"),e.qZA(),e._uU(4,")"),e.qZA())}function ye(t,i){if(1&t&&(e.TgZ(0,"td",21),e._uU(1),e.ALo(2,"number"),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,a.total_area,"1.2-2")," ")}}function Ie(t,i){1&t&&(e.TgZ(0,"th",20),e._uU(1," Built-up-Area ("),e.TgZ(2,"small"),e._uU(3,"SQFT"),e.qZA(),e._uU(4,") "),e.qZA())}function Oe(t,i){if(1&t&&(e.TgZ(0,"td",21),e._uU(1),e.ALo(2,"number"),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,a.built_up_area,"1.2-2")," ")}}function we(t,i){1&t&&(e.TgZ(0,"th",20),e._uU(1," Actions "),e.qZA())}function Le(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"td",21)(1,"a",22),e.NdJ("click",function(l){const f=e.CHM(a).$implicit,p=e.oxw();return e.KtG(p.downloadPdf(l,f.saleoffer_id))}),e._UZ(2,"i-tabler",23),e.qZA()()}}function Pe(t,i){1&t&&e._UZ(0,"tr",24)}function Ye(t,i){1&t&&e._UZ(0,"tr",25)}let Fe=(()=>{class t{constructor(a,r){this._httpClient=a,this._SellofferService=r,this.displayedColumns=["saleoffer_id","project_name","selling_price","total_area","built_up_area","actions"],this.exampleDatabase=null,this.saleofferData=[],this.counter=1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1}ngAfterViewInit(){this.exampleDatabase=new Je(this._httpClient),this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,_e.T)(this.sort.sortChange,this.paginator.page).pipe((0,he.O)({}),(0,ge.w)(()=>(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex))),(0,S.U)(a=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=a.total_count,a.data)),(0,N.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,q.of)([])))).subscribe(a=>this.saleofferData=a))}ngOnInit(){}reloadData(){this.sort&&this.paginator&&(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex).pipe((0,N.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,q.of)([])))).subscribe(a=>{"data"in a&&(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=a.total_count,this.saleofferData=a.data)}))}downloadPdf(a,r){if(r){const l=new FormData;l.append("sale_id",r),this._SellofferService.GenratePdf(l).subscribe(s=>{const f=new Blob([s],{type:"application/pdf"}),p=URL.createObjectURL(f);window.open(p)})}}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(A.eN),e.Y36(x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-list-sale-offer"]],viewQuery:function(a,r){if(1&a&&(e.Gf(y.NW,5),e.Gf(I.YE,5)),2&a){let l;e.iGM(l=e.CRH())&&(r.paginator=l.first),e.iGM(l=e.CRH())&&(r.sort=l.first)}},decls:28,vars:6,consts:[[1,"cardWithShadow"],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","saleoffer_id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","project_name"],["matColumnDef","selling_price"],["matColumnDef","total_area"],["matColumnDef","built_up_area"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],[1,"m-r-10","cursor-pointer",3,"click"],["name","file",1,"icon-18"],["mat-header-row",""],["mat-row",""]],template:function(a,r){1&a&&(e.TgZ(0,"mat-card",0),e._UZ(1,"mat-card-header"),e.TgZ(2,"mat-card-content")(3,"div",1),e.YNc(4,be,3,2,"div",2),e.TgZ(5,"div",3)(6,"table",4),e.ynx(7,5),e.YNc(8,Ae,2,0,"th",6),e.YNc(9,xe,2,1,"td",7),e.BQk(),e.ynx(10,8),e.YNc(11,Ce,2,0,"th",6),e.YNc(12,Ue,2,1,"td",7),e.BQk(),e.ynx(13,9),e.YNc(14,qe,5,0,"th",6),e.YNc(15,Se,3,4,"td",7),e.BQk(),e.ynx(16,10),e.YNc(17,Ne,5,0,"th",6),e.YNc(18,ye,3,4,"td",7),e.BQk(),e.ynx(19,11),e.YNc(20,Ie,5,0,"th",6),e.YNc(21,Oe,3,4,"td",7),e.BQk(),e.ynx(22,12),e.YNc(23,we,2,0,"th",6),e.YNc(24,Le,3,0,"td",7),e.BQk(),e.YNc(25,Pe,1,0,"tr",13),e.YNc(26,Ye,1,0,"tr",14),e.qZA()(),e._UZ(27,"mat-paginator",15),e.qZA()()()),2&a&&(e.xp6(4),e.Q6J("ngIf",r.isLoadingResults||r.isRateLimitReached),e.xp6(2),e.Q6J("dataSource",r.saleofferData),e.xp6(19),e.Q6J("matHeaderRowDef",r.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",r.displayedColumns),e.xp6(1),e.Q6J("length",r.resultsLength)("pageSize",10))},dependencies:[d.O5,u.a8,u.dn,u.dk,Ze.Ou,y.NW,I.YE,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,g.b,d.JJ]}),t})();class Je{constructor(i){this._httpClient=i}getLeads(i,a,r){return this._httpClient.get(`https://newcrmbackend.evernestre.ae/api/sale/saleoffer-list?sort=${i}&order=${a}&page=${r+1}`).pipe((0,S.U)(p=>({...p,data:p.data.map((_,Z)=>({..._,counter:Z+1+10*r}))})))}}const De=[{path:"",children:[{path:"sale-offer",component:fe,data:{title:"Create Sale Offer",urls:[{title:"Dashboard",url:"/sale/sale-offer"},{title:"Create Sale Offer"}]}},{path:"list-sale-offer",component:Fe,data:{title:"List Sale Offer",urls:[{title:"Dashboard",url:"/sale/list-sale-offer"},{title:"List Sale Offer"}]}}]}];let Qe=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[d.uU],imports:[d.ez,T.Bz.forChild(De),me.q,n.u5,pe.FormModule,n.UX,g.e,g.e.pick(ue),C.c,de.A0,ce.JX,h.FA]}),t})()}}]);