"use strict";(self.webpackChunkModernize=self.webpackChunkModernize||[]).push([[872],{872:(ne,y,l)=>{l.r(y),l.d(y,{DashboardsModule:()=>se});var p=l(4755),b=l(6873),c=l(9401),B=l(5226),g=l.n(B),U=l(8675),A=l(4004),I=l(2132),f=l(1643),j=l(4213),t=l(2223),M=l(620),O=l(4227),q=l(6286),E=l(7556),_=l(8995),S=l(1217),Z=l(9114),x=l(8097),H=l(4867),W=l(7406),P=l(2214),h=l(6012),$=l(3630),Y=l(1728),G=l(430),r=l(3627),D=l(792),J=l(4365),R=l(4333);const K=function(s,i,e,a,n,o,d,m,u,v,w,N,C,ie){return{"New Lead":s,"Assigned Lead":i,"Connected Lead":e,"Cold Lead":a,"Warm Lead":n,"Hot Lead":o,"Meeting Schdulede":d,"Meeting Complate":m,"Low-Buget":u,"No-Answer":v,"Not-Responding":w,"Incorrect Detail":N,Agent:C,Junk:ie}};function X(s,i){if(1&s&&(t.ynx(0),t.TgZ(1,"span",31),t._uU(2),t.qZA(),t.BQk()),2&s){const e=t.oxw().$implicit,a=t.oxw();t.xp6(2),t.hij(" ",t.rFY(1,K,[a.Newleads,a.Assignleads,a.Connectedleads,a.Coldleads,a.Warmleads,a.Hotleads,a.MeetingSchduledeleads,a.MeetingComplate,a.LowBuget,a.NoAnswer,a.NotResponding,a.IncorrectDetail,a.Agent,a.Junk])[e.name].length||0," ")}}function z(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",25),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.mailboxesChanged(o.id))}),t.TgZ(1,"div",26),t._UZ(2,"i-tabler",27),t.TgZ(3,"span",28),t._uU(4),t.qZA(),t.TgZ(5,"div",29),t.YNc(6,X,3,16,"ng-container",30),t.qZA()()()}if(2&s){const e=i.$implicit;t.xp6(1),t.ekj("bg-light-primary",e.active),t.xp6(1),t.s9C("name",e.icon),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",1===e.id||2===e.id||3===e.id||4===e.id||5===e.id||6===e.id||7===e.id||8===e.id||9===e.id||10===e.id||11===e.id||12===e.id||13===e.id||14===e.id)}}function V(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.goToPage(o))}),t._uU(1),t.qZA()}if(2&s){const e=i.$implicit,a=t.oxw();t.ekj("active",e===a.p),t.xp6(1),t.Oqu(e)}}function tt(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",25),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.mailSelected(o))}),t.TgZ(1,"div",33)(2,"div",34),t._UZ(3,"mat-radio-button"),t.TgZ(4,"div",35)(5,"div")(6,"div",36)(7,"h5",37),t._uU(8),t.ALo(9,"slice"),t.qZA()(),t.TgZ(10,"span",38),t._uU(11),t.ALo(12,"slice"),t.qZA(),t.TgZ(13,"div",39)(14,"span",40),t._UZ(15,"i-tabler",41),t.qZA(),t.TgZ(16,"span",42),t._UZ(17,"i-tabler",43),t.qZA(),t.TgZ(18,"div",44)(19,"span",45),t._uU(20),t.qZA()()()()()()(),t._UZ(21,"mat-divider"),t.qZA()}if(2&s){const e=i.$implicit;t.xp6(8),t.Oqu(t.Dn7(9,3,e.customer_name,0,15)),t.xp6(3),t.hij(" ",t.Dn7(12,7,e.lead_title,0,45)," "),t.xp6(9),t.hij(" ",e.assigned_at," ")}}function et(s,i){1&s&&(t.TgZ(0,"div",46)(1,"div",47)(2,"div")(3,"h3",48),t._uU(4,"Please Select Any Leads which lead your want see info"),t.qZA(),t._UZ(5,"img",49),t.qZA()()())}function at(s,i){1&s&&(t.TgZ(0,"th",84),t._uU(1," Responsible "),t.qZA())}function st(s,i){if(1&s&&(t.TgZ(0,"td",85)(1,"div",3)(2,"div",86)(3,"h6",87),t._uU(4),t.qZA(),t.TgZ(5,"span",88),t._uU(6),t.qZA()()()()),2&s){const e=t.oxw(3);t.xp6(4),t.hij(" ",(null==e.leadInfo.agents?null:e.leadInfo.agents.client_user_name)||"Unknow"," "),t.xp6(2),t.hij(" ",(null==e.leadInfo.agents?null:e.leadInfo.agents.client_user_designation)||"Unknow"," ")}}function it(s,i){1&s&&(t.TgZ(0,"th",89),t._uU(1," Mobile"),t.qZA())}function nt(s,i){if(1&s&&(t.TgZ(0,"td",90),t._uU(1),t.qZA()),2&s){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.leadInfo.customer_phone||"Unknow"," ")}}function ot(s,i){1&s&&(t.TgZ(0,"th",89),t._uU(1," Whatsapp"),t.qZA())}function lt(s,i){if(1&s&&(t.TgZ(0,"td",90),t._uU(1),t.qZA()),2&s){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.leadInfo.customer_phone2||"Unknow","")}}function dt(s,i){1&s&&(t.TgZ(0,"th",89),t._uU(1," Email"),t.qZA())}function rt(s,i){if(1&s&&(t.TgZ(0,"td",90),t._uU(1),t.qZA()),2&s){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.leadInfo.customer_email||"Invalid Emial"," ")}}function mt(s,i){1&s&&(t.TgZ(0,"th",89),t._uU(1," Client/Name "),t.qZA())}function ct(s,i){if(1&s&&(t.TgZ(0,"td",90),t._uU(1),t.TgZ(2,"small"),t._uU(3),t.qZA()()),2&s){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.leadInfo.customer_name||"Invalid Emial"," / "),t.xp6(2),t.hij(" ",e.leadInfo.customer_position||"Invalid Emial"," ")}}function pt(s,i){1&s&&t._UZ(0,"tr",91)}function ht(s,i){1&s&&t._UZ(0,"tr",92)}function ut(s,i){if(1&s&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.hij("\xa0 ",e.agent_name," ")}}function gt(s,i){if(1&s&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&s){const e=t.oxw().index,a=t.oxw(3);t.xp6(1),t.hij("\xa0 ",a.leadoptions[a.leadInfo.comments[e-1].lead_status-1].notes,"")}}function ft(s,i){if(1&s&&(t.TgZ(0,"mat-card",96)(1,"mat-card-content")(2,"small"),t._uU(3),t.qZA(),t._uU(4," \xa0 "),t.TgZ(5,"small"),t._uU(6),t.qZA(),t.TgZ(7,"small"),t._uU(8),t.qZA()()()),2&s){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.updated_at||"Invalid Time",""),t.xp6(3),t.hij(" ",e.user_name," : "),t.xp6(2),t.hij(" ",e.lead_comment," ")}}function _t(s,i){if(1&s&&(t.TgZ(0,"div",93)(1,"div",94)(2,"small"),t._uU(3),t.qZA(),t._uU(4," \xa0 "),t.TgZ(5,"small"),t._uU(6),t.qZA(),t.TgZ(7,"small"),t._uU(8),t.qZA(),t.YNc(9,ut,2,1,"small",30),t.YNc(10,gt,2,1,"small",30),t.YNc(11,ft,9,3,"mat-card",95),t.qZA()()),2&s){const e=i.$implicit,a=i.index,n=t.oxw(3);t.xp6(3),t.hij(" ",(null==e?null:e.created_at)||"Invalid Time"," "),t.xp6(3),t.hij(" ",null!==(null==e?null:e.user_id)?null==e?null:e.user_name:a>0?n.leadInfo.comments[a-1].user_name:""," "),t.xp6(2),t.hij(" ",n.leadoptions[e.lead_status-1].label,""),t.xp6(1),t.Q6J("ngIf",2==n.leadInfo.comments[a].lead_status),t.xp6(1),t.Q6J("ngIf",a>0),t.xp6(1),t.Q6J("ngIf",e.lead_comment)}}function vt(s,i){if(1&s&&(t.TgZ(0,"mat-option",97),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.label,"")}}function xt(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",56)(1,"div",57)(2,"mat-card",53)(3,"mat-card-header",42)(4,"mat-card-title"),t._uU(5," Details of the lead "),t.qZA()(),t.TgZ(6,"mat-card-content")(7,"div",58)(8,"table",59),t.ynx(9,60),t.YNc(10,at,2,0,"th",61),t.YNc(11,st,7,2,"td",62),t.BQk(),t.ynx(12,63),t.YNc(13,it,2,0,"th",64),t.YNc(14,nt,2,1,"td",65),t.BQk(),t.ynx(15,66),t.YNc(16,ot,2,0,"th",64),t.YNc(17,lt,2,1,"td",65),t.BQk(),t.ynx(18,67),t.YNc(19,dt,2,0,"th",64),t.YNc(20,rt,2,1,"td",65),t.BQk(),t.ynx(21,68),t.YNc(22,mt,2,0,"th",64),t.YNc(23,ct,4,2,"td",65),t.BQk(),t.YNc(24,pt,1,0,"tr",69),t.YNc(25,ht,1,0,"tr",70),t.qZA()()()()(),t.TgZ(26,"div",57)(27,"div",71),t.YNc(28,_t,12,6,"div",72),t.qZA()(),t.TgZ(29,"div",57)(30,"div",73)(31,"form",74),t.NdJ("ngSubmit",function(n){t.CHM(e);const o=t.oxw(2);return t.KtG(o.updateLeadStaus(n,o.leadInfo.agent_id))}),t.TgZ(32,"mat-form-field",75)(33,"input",76),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw(2);return t.KtG(o.leadInfo.lead_id=n)}),t.qZA(),t._UZ(34,"input",77),t.TgZ(35,"mat-autocomplete",78,79),t.YNc(37,vt,2,2,"mat-option",80),t.qZA()(),t.TgZ(38,"mat-form-field",81)(39,"mat-label"),t._uU(40,"Type your comments here"),t.qZA(),t._UZ(41,"textarea",82),t.qZA(),t.TgZ(42,"button",83),t._uU(43,"Send"),t.qZA()()()()()}if(2&s){const e=t.MAs(36),a=t.oxw(2);t.xp6(8),t.Q6J("dataSource",a.dataSource1),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns1),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns1),t.xp6(3),t.Q6J("ngForOf",a.leadInfo.comments),t.xp6(3),t.Q6J("formGroup",a.updateleadform),t.xp6(2),t.Q6J("ngModel",a.leadInfo.lead_id),t.xp6(1),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.displayLeadLabel),t.xp6(2),t.Q6J("ngForOf",a.leadoptions2)}}function Ct(s,i){if(1&s&&(t.TgZ(0,"div",50)(1,"div",51)(2,"div",52),t._uU(3),t.ALo(4,"slice"),t.qZA(),t._UZ(5,"mat-menu",53,54)(7,"mat-divider"),t.YNc(8,xt,44,9,"div",55),t.qZA()()),2&s){const e=t.oxw();t.xp6(3),t.hij(" ",t.Dn7(4,2,e.leadInfo.lead_title,0,45)," "),t.xp6(5),t.Q6J("ngIf",e.ms.selectedLead)}}const bt=function(s,i){return{"side-panel-opened":s,"side-panel-closed":i}},At=function(s){return{itemsPerPage:12,currentPage:s}},Zt=[{id:1,imagePath:"assets/images/profile/user-1.jpg",uname:"Sunil Joshi",position:"Web Designer",productName:"Elite Admin",budget:3.9,priority:"low"}];let Q=(()=>{class s{constructor(e,a,n,o,d,m,u,v,w,N){this.leadsService=e,this.fb=a,this.mailService=n,this.ms=o,this.router=d,this.dialog=m,this._Location=u,this._AuthService=v,this._Router=w,this._cdr=N,this.allLeads=[],this.filteredLeads=[],this.Newleads=[],this.Assignleads=[],this.Connectedleads=[],this.Coldleads=[],this.Warmleads=[],this.Hotleads=[],this.MeetingSchduledeleads=[],this.MeetingComplate=[],this.NoAnswer=[],this.LowBuget=[],this.NotResponding=[],this.IncorrectDetail=[],this.Agent=[],this.Junk=[],this.sidebarVisible=!1,this.leadInfo={},this.leadoptions=[],this.leadoptions2=[],this.sidePanelOpened=!0,this.displayMode="default",this.p=1,this.stateCtrl=new c.NI(""),this.itemsPerPage=12,this.fd=new FormData,this.mediaMatcher=matchMedia("(max-width: 960px)"),this.mailboxes=f.cE,this.filters=f.hX,this.labels=f.PS,this.displayedColumns1=["Responsible-User","Mobile","Whatsapp","Email","Name/Position"],this.dataSource1=Zt,this.filteredStates=this.stateCtrl.valueChanges.pipe((0,U.O)(""),(0,A.U)(C=>C?this._filterStates(C):this.leadoptions2.slice()))}_filterStates(e){const a=e.toLowerCase();return this.leadoptions2.filter(n=>n.label.toLowerCase().includes(a))}isOver(){return this.mediaMatcher.matches}ngOnInit(){this.initFacebookSdk(),console.log("data"),FB.api("/me",{fields:"last_name"},function(e){console.log("xyz"),console.log(e)}),this.userData=localStorage.getItem("userData"),this.userData?(this.user=JSON.parse(this.userData),this.role=this.user?.client_user_role,this.loginUserId=this.user?.client_user_id):console.error("User data not found in localStorage"),this._AuthService.checkUserDataExists(this.loginUserId).subscribe(e=>{},e=>{(404==e.status||404===e.status)&&(localStorage.removeItem("userData"),this._Router.navigate(["/authentication/side-login"]))}),this.updateleadform=this.fb.group({lead_status:new c.NI("",[c.kI.required]),lead_id:new c.NI(""),lead_comment:new c.NI("",[c.kI.required])}),this.leadoptions=I.rl.leads,this.leadoptions2=this.filteredLeadsOptions(),this.loadAllLeads()}initFacebookSdk(){FB.init({appId:"1067623880812441",autoLogAppEvents:!0,xfbml:!0,version:"v19.0"})}filteredLeadsOptions(){return I.k2.leadsoption.filter(e=>e.role===this.role||""===e.role)}loadAllLeads(){this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.role=this.user.client_user_role,this.fd.append("login_user_id",this.user.client_user_id),this.fd.append("user_role",this.role),this.leadsService.GetAgentAndAdminWiseLeads(this.fd).subscribe(a=>{this.allLeads=a.data,[1,2,3,4,5,6,7,8,9,10,11,12,13,14].forEach(o=>{this.filterLeads(o)})})}filterLeads(e){1===e?this.Newleads=this.allLeads.filter(a=>1==a.lead_status):2===e?this.Assignleads=this.allLeads.filter(a=>2==a.lead_status):3===e?this.Connectedleads=this.allLeads.filter(a=>3==a.lead_status):4===e?this.Coldleads=this.allLeads.filter(a=>4==a.lead_status):5===e?this.Warmleads=this.allLeads.filter(a=>5==a.lead_status):6===e?this.Hotleads=this.allLeads.filter(a=>6==a.lead_status):7===e?this.MeetingSchduledeleads=this.allLeads.filter(a=>7==a.lead_status):8===e?this.MeetingComplate=this.allLeads.filter(a=>8==a.lead_status):9===e?this.NoAnswer=this.allLeads.filter(a=>9==a.lead_status):10===e?this.LowBuget=this.allLeads.filter(a=>10==a.lead_status):11===e?this.NotResponding=this.allLeads.filter(a=>11==a.lead_status):12===e?this.IncorrectDetail=this.allLeads.filter(a=>12==a.lead_status):13===e?this.Agent=this.allLeads.filter(a=>13==a.lead_status):14===e&&(this.Junk=this.allLeads.filter(a=>14==a.lead_status))}leadUser(e){return!(null==e[1].user_id&&e[2]>0)}getAgentName(e){this.leadsService.AgentNameById(e).subscribe(a=>{a&&a.length>0?this.agentName=a[0].client_user_name:console.log("Could Not find Any User")},a=>{console.error("Error fetching agent name:",a),console.log("An error occurred while fetching agent name")})}previousPage(){this.p>1&&this.p--}nextPage(){this.p<this.getTotalPages()&&this.p++}goToPage(e){this.p=e}getTotalPages(){return Math.ceil(this.ms.leadList?.length/this.itemsPerPage)}getPageNumbers(){const e=this.getTotalPages(),a=this.p;let o,d;if(e<=3)o=1,d=e;else{const m=Math.floor(1.5);a<=m?(o=1,d=3):a+m>=e?(o=e-3+1,d=e):(o=a-m,d=a+m)}return Array.from({length:d-o+1},(m,u)=>o+u)}mailSelected(e){this.ms.selectedLead=null,this.ms.selectedLead=e,this.selectedIndex=e.lead_id,this.ms.selectedLead.seen=!0,e.seen=!0,this.ms.addClass=!0,this.leadInfo=e}removeClass(){this.ms.addClass=!1}mailboxesChanged(e){if(2!=this.role||1!==e)switch(e){case 1:this.ms.selectedLead=null,this.ms.leadList=this.Newleads,this.ms.topLable="New Lead",this.mailActiveClass(e),this.ms.type="newleads",this.statusId=e;break;case 2:this.ms.selectedLead=null,this.ms.leadList=this.Assignleads,this.ms.topLable="Assigned",this.mailActiveClass(e),this.ms.type="assignedleads",this.statusId=e;break;case 3:this.ms.selectedLead=null,this.ms.leadList=this.Connectedleads,this.ms.topLable="Connected",this.mailActiveClass(e),this.ms.type="connectedleads",this.statusId=e;break;case 4:this.ms.selectedLead=null,this.ms.leadList=this.Coldleads,this.ms.topLable="Cold",this.mailActiveClass(e),this.ms.type="connectedleads",this.statusId=e;break;case 5:this.ms.selectedLead=null,this.ms.leadList=this.Warmleads,this.ms.topLable="Warm",this.mailActiveClass(e),this.ms.type="warmleads";break;case 6:this.ms.selectedLead=null,this.ms.leadList=this.Hotleads,this.ms.topLable="Hot",this.mailActiveClass(e),this.ms.type="hotleads";break;case 7:this.ms.selectedLead=null,this.ms.leadList=this.MeetingSchduledeleads,this.ms.topLable="Meeting Schdulede",this.mailActiveClass(e),this.ms.type="meetingschdulede";break;case 8:this.ms.selectedLead=null,this.ms.leadList=this.MeetingComplate,this.ms.topLable="Meeting Complate",this.mailActiveClass(e),this.ms.type="meetingschdulede";break;case 9:this.ms.selectedLead=null,this.ms.leadList=this.NoAnswer,this.ms.topLable="No-Answer",this.mailActiveClass(e),this.ms.type="noanswer";break;case 10:this.ms.selectedLead=null,this.ms.leadList=this.LowBuget,this.ms.topLable="Low-Buget",this.mailActiveClass(e),this.ms.type="lowbuget";break;case 11:this.ms.selectedLead=null,this.ms.leadList=this.NotResponding,this.ms.topLable="Not-Responding",this.mailActiveClass(e),this.ms.type="notresponding";break;case 12:this.ms.selectedLead=null,this.ms.leadList=this.IncorrectDetail,this.ms.topLable="Incorrect Detail",this.mailActiveClass(e),this.ms.type="incorrectdetail";break;case 13:this.ms.selectedLead=null,this.ms.leadList=this.Agent,this.ms.topLable="Agent",this.mailActiveClass(e),this.ms.type="agent";break;case 14:this.ms.selectedLead=null,this.ms.leadList=this.Junk,this.ms.topLable="Junk",this.mailActiveClass(e),this.ms.type="junk"}else g().fire({title:"Sorry",html:"You do not have permission to access New leads",timer:2e3,showConfirmButton:!1})}mailActiveClass(e){for(const a of f.cE)a.active=!1;f.cE.find(a=>a.id===e).active=!0}openDialog(){this.dialog.open(j.a,{}).afterClosed().subscribe(a=>{console.log(`Dialog result: ${a}`)})}onOptionSelected(e){this.currentselectdstatus=e.option.value}displayLeadLabel(e){return e?e.label:""}updateLeadStaus(e,a){if(e.preventDefault(),this.updateleadform.valid){const o=this.updateleadform.value;var n=new FormData;n.append("lead_status",o.lead_status.lead_status),n.append("lead_id",o.lead_id),n.append("lead_comment",o.lead_comment),n.append("agent_id",a),this.loginUserId&&n.append("login_user_id",this.loginUserId),n.append("user_id",1==this.role?this.loginUserId:""),this.leadsService.UpdateSingLead(n).subscribe(d=>{"success"===d.status&&(g().fire({title:"Success",html:"Lead Update Successfully",timer:2e3,showConfirmButton:!1}),this.updateleadform.reset(),this.ms.selectedLead=null,this._cdr.detectChanges())},d=>{console.log(d)})}}formatDateOrToday(e){const a=new Date,n=new Date(e);if(this.isSameDate(n,a))return`Today ${this.formatTime12Hour(n)}`;const o=new Date(a);return o.setDate(a.getDate()-1),this.isSameDate(n,o)?`Yesterday ${this.formatTime12Hour(n)}`:new p.uU("en-US").transform(n,"short")}formatTime12Hour(e){return e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}isSameDate(e,a){return e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()&&e.getDate()===a.getDate()}get f(){return this.updateleadform.controls}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(M.C),t.Y36(c.qu),t.Y36(O.W),t.Y36(O.L),t.Y36(b.F0),t.Y36(q.uw),t.Y36(p.Ye),t.Y36(E.e),t.Y36(b.F0),t.Y36(t.sBO))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-dashboard1"]],decls:35,vars:21,consts:[[1,"cardWithShadow","overflow-hidden"],[1,"bg-primary","text-white","p-10","d-block","d-lg-none"],[1,"m-b-0"],[1,"d-flex","align-items-center"],["mat-icon-button","",3,"click"],[1,"mat-subheading-1","m-b-0","m-l-16"],[1,"email-box",2,"height","calc(100vh - 120px)",3,"ngClass"],[1,"mail-sidebar",3,"mode","opened","open","close"],["mailnav",""],[1,"position-relative",2,"height","calc(100% - 10px)"],[1,"p-16"],[3,"click",4,"ngFor","ngForOf"],[1,"p-x-15","w-100","h-100"],[1,"row","h-100"],[1,"col-lg-4","b-r-1","p-0"],[1,"p-x-20","d-flex","align-items-center",2,"padding-top","10px","padding-bottom","10px"],[1,"f-w-500","mat-subtitle-1","f-s-16","m-0"],[1,"m-l-auto"],[1,"pagination-controls"],[2,"max-width","28px !important","background-color","#fff","margin","2px","border","1px solid #5d87ff","cursor","pointer",3,"disabled","click"],["style","max-width: 28px !important; background-color: #fff; margin: 2px; border:1px solid #5d87ff; cursor: pointer;",3,"active","click",4,"ngFor","ngForOf"],[1,"position-relative"],[1,"col-lg-8","detail-part","p-0"],["class","h-100 welcome-app",4,"ngIf"],["class","w-100",4,"ngIf"],[3,"click"],[1,"d-flex","align-items-center","inbox-list","rounded","p-16","cursor-pointer"],[1,"m-r-12","icon-18",3,"name"],[1,"f-w-400","f-s-14"],[1,"m-l-auto","d-sm-flex","align-items-center","gap-4"],[4,"ngIf"],[1,"bg-accent","rounded-pill","p-x-4","text-white"],[2,"max-width","28px !important","background-color","#fff","margin","2px","border","1px solid #5d87ff","cursor","pointer",3,"click"],[1,"mail-list","p-y-20","p-x-16","p-l-10","cursor-pointer"],[1,"d-flex","align-items-start","w-100"],[1,"m-l-10","w-100"],[1,"d-flex","align-items-center","w-100"],[1,"m-0","f-w-600","mat-subtitle-1","f-s-16"],[1,"mat-body-1"],[1,"d-flex","justify-content-center","m-t-8"],[1,"m-r-8","d-flex"],["name","star",1,"icon-18"],[1,"d-flex"],["name","alert-circle",1,"icon-18","text-error"],[1,"m-l-auto","text-end"],[1,"f-s-12","text-nowrap"],[1,"h-100","welcome-app"],[1,"d-flex","align-items-center","justify-content-center","w-100"],[1,"mat-subtitle-1","f-w-600"],["src","/assets/images/breadcrumb/emailSv.png","width","250px"],[1,"w-100"],[1,"w-100","position-relative"],[1,"d-flex","align-items-center","p-x-16","p-y-16",2,"padding-top","19px !important"],[1,"cardWithShadow"],["menu","matMenu"],["class","position-relative","style","height: calc(100vh - 247px)",4,"ngIf"],[1,"position-relative",2,"height","calc(100vh - 247px)"],[1,"p-24"],[1,"table-responsive","m-t-30"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","Responsible-User"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14 p-l-0",4,"matHeaderCellDef"],["mat-cell","","class","p-l-0",4,"matCellDef"],["matColumnDef","Mobile"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","Whatsapp"],["matColumnDef","Email"],["matColumnDef","Name/Position"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"p-t-5"],["class","",4,"ngFor","ngForOf"],[1,"m-t-10"],["id","updateleadform",3,"formGroup","ngSubmit"],["appearance","outline",1,"w-100","border-0"],["type","hidden","formControlName","lead_id",3,"ngModel","ngModelChange"],["type","text","placeholder","Pick One","aria-label","Pick One","matInput","","formControlName","lead_status",3,"matAutocomplete"],[3,"displayWith"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-100"],["matInput","","rows","5","formControlName","lead_comment"],["mat-flat-button","","color","accent","type","submit",1,"m-l-10"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14","p-l-0"],["mat-cell","",1,"p-l-0"],[1,"m-l-16"],[1,"mat-subtitle-1","f-s-14","f-w-600"],[1,"mat-body-1","f-s-12"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-header-row",""],["mat-row",""],[1,""],[1,"maindiv"],["class","b-1 shadow-none","style","margin-bottom: 4px;",4,"ngIf"],[1,"b-1","shadow-none",2,"margin-bottom","4px"],[3,"value"]],template:function(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){t.CHM(n);const d=t.MAs(11);return t.KtG(d.toggle())}),t.TgZ(5,"mat-icon"),t._uU(6,"short_text"),t.qZA()(),t.TgZ(7,"div",5),t._uU(8,"Inbox"),t.qZA()()()(),t.TgZ(9,"mat-sidenav-container",6)(10,"mat-sidenav",7,8),t.NdJ("open",function(){return a.sidePanelOpened=!0})("close",function(){return a.sidePanelOpened=!1}),t.TgZ(12,"ng-scrollbar",9)(13,"div",10),t.YNc(14,z,7,5,"div",11),t.qZA()()(),t.TgZ(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15)(19,"h5",16),t._uU(20),t.qZA(),t.TgZ(21,"div",17)(22,"div",18)(23,"button",19),t.NdJ("click",function(){return a.previousPage()}),t._uU(24," < "),t.qZA(),t.YNc(25,V,2,3,"button",20),t.TgZ(26,"button",19),t.NdJ("click",function(){return a.nextPage()}),t._uU(27," > "),t.qZA()()()(),t._UZ(28,"mat-divider"),t.TgZ(29,"div",21),t.YNc(30,tt,22,11,"div",11),t.ALo(31,"paginate"),t.qZA()(),t.TgZ(32,"div",22),t.YNc(33,et,6,0,"div",23),t.YNc(34,Ct,9,6,"div",24),t.qZA()()()()()}2&e&&(t.xp6(9),t.Q6J("ngClass",t.WLB(16,bt,a.sidePanelOpened,!a.sidePanelOpened)),t.xp6(1),t.Q6J("mode",a.isOver()?"over":"side")("opened",!a.isOver()),t.xp6(4),t.Q6J("ngForOf",a.mailboxes),t.xp6(6),t.Oqu(a.ms.topLable),t.xp6(3),t.Q6J("disabled",1===a.p),t.xp6(2),t.Q6J("ngForOf",a.getPageNumbers()),t.xp6(1),t.Q6J("disabled",a.p===a.getTotalPages()),t.xp6(4),t.Q6J("ngForOf",t.xi3(31,13,a.ms.leadList,t.VKq(19,At,a.p))),t.xp6(2),t.ekj("movetodetail",a.ms.addClass),t.xp6(1),t.Q6J("ngIf",null===a.ms.selectedLead),t.xp6(1),t.Q6J("ngIf",null!==a.ms.selectedLead))},dependencies:[p.mk,p.sg,p.O5,_.XC,S.ey,_.ZL,Z.KE,Z.hX,x.Nt,H.U0,W.VK,P.JX,P.TM,h.a8,h.dn,h.dk,h.n5,$.d,Y.lW,Y.RK,G.Hw,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,D.b,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,J.KC,p.OU,R._s],styles:[".mail-sidebar[_ngcontent-%COMP%]{width:240px}.mail-detail-sidebar[_ngcontent-%COMP%]{width:200px;flex:1 1 auto}@media (max-width: 991px){.detail-part[_ngcontent-%COMP%]{display:none}}@media (max-width: 1279px){.detail-part.movetodetail[_ngcontent-%COMP%]{display:block;position:absolute;z-index:9;left:0;background:#fff}}@media (max-width: 1279px){.welcome-app[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]     .light-theme .mat-mdc-card{margin-bottom:4px}.mat-mdc-card-content[_ngcontent-%COMP%]:first-child{padding-top:6px}.mat-mdc-card-content[_ngcontent-%COMP%]:last-child{padding-bottom:6px}.mat-mdc-card-content[_ngcontent-%COMP%]{padding:0 8px}[_nghost-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%]{height:80%!important}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:8px!important;padding-bottom:8px!important}[_nghost-%COMP%]     .mat-mdc-form-field-infix{min-height:10px!important}[_nghost-%COMP%]     .ngx-pagination .current{padding:0 6px;background-color:#2199e8!important}[_nghost-%COMP%]     ::-webkit-scrollbar{height:7px}[_nghost-%COMP%]     .active{background-color:#5d87ff!important;color:#fff!important;border:1px solid #fff!important}"]}),s})();var T=l(3276),L=l(2611),Dt=l(6451),k=l(9646),Tt=l(3900),F=l(262),Lt=l(9234),wt=l(3144),Nt=l(8467);function yt(s,i){1&s&&t._UZ(0,"mat-spinner")}function Ut(s,i){1&s&&(t.TgZ(0,"div",20),t._uU(1," API rate limit has been reached. It will be reset in one minute. "),t.qZA())}function It(s,i){if(1&s&&(t.TgZ(0,"div",17),t.YNc(1,yt,1,0,"mat-spinner",18),t.YNc(2,Ut,2,0,"div",19),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoadingResults),t.xp6(1),t.Q6J("ngIf",e.isRateLimitReached)}}function Mt(s,i){1&s&&(t.TgZ(0,"th",21),t._uU(1," # "),t.qZA())}function Ot(s,i){if(1&s&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",e.counter," ")}}function St(s,i){1&s&&(t.TgZ(0,"th",21),t._uU(1," Lead Title "),t.qZA())}function Pt(s,i){if(1&s&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",e.lead_title||"Invalid Title"," ")}}function Yt(s,i){1&s&&(t.TgZ(0,"th",21),t._uU(1,"Client Name "),t.qZA())}function Jt(s,i){if(1&s&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",e.customer_name||"Invalid Name"," ")}}function Rt(s,i){1&s&&(t.TgZ(0,"th",21),t._uU(1,"Client Phone "),t.qZA())}function Qt(s,i){if(1&s&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",e.customer_phone||"Invalid Name"," ")}}function kt(s,i){1&s&&(t.TgZ(0,"th",21),t._uU(1," Actions "),t.qZA())}function Ft(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"td",22)(1,"a",23),t.NdJ("click",function(n){const d=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.Delete(n,d.lead_id))}),t._UZ(2,"i-tabler",24),t.qZA()()}}function Bt(s,i){1&s&&(t.TgZ(0,"th",21),t._uU(1," Reassign "),t.qZA())}function jt(s,i){if(1&s&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.client_user_name,"")}}function qt(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"td",25)(1,"mat-form-field",26),t._UZ(2,"input",27),t.TgZ(3,"mat-autocomplete",28,29),t.NdJ("optionSelected",function(n){const d=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.onOptionSelected(n,d))}),t.YNc(5,jt,2,2,"mat-option",30),t.qZA()()()}if(2&s){const e=t.MAs(4),a=t.oxw();t.xp6(2),t.Q6J("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",a.displayLeadLabel),t.xp6(2),t.Q6J("ngForOf",a.allAgents)}}function Et(s,i){1&s&&t._UZ(0,"tr",32)}function Ht(s,i){1&s&&t._UZ(0,"tr",33)}let Wt=(()=>{class s{constructor(e,a){this._httpClient=e,this._LeadsService=a,this.displayedColumns=["lead_id","lead_title","customer_name","customer_phone","reassign","actions"],this.exampleDatabase=null,this.leadsData=[],this.counter=1,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1}ngAfterViewInit(){this.exampleDatabase=new $t(this._httpClient),this.sort&&this.paginator&&(this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,Dt.T)(this.sort.sortChange,this.paginator.page).pipe((0,U.O)({}),(0,Tt.w)(()=>(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex))),(0,A.U)(e=>(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=e.total_count,e.data)),(0,F.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,k.of)([])))).subscribe(e=>this.leadsData=e))}ngOnInit(){this.userData=localStorage.getItem("userData"),this.user=JSON.parse(this.userData),this.loginuserId=this.user.client_user_id,this.role=this.user.client_user_role,this.agents()}Delete(e,a){g().fire({title:"Are you sure want to remove?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(n=>{n.isConfirmed&&this._LeadsService.DeleteLead(a).subscribe(o=>{"delete"===o.status&&(g().fire({title:"Success",html:"Lead Delete Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},o=>{console.log(o)})})}reloadData(){this.sort&&this.paginator&&(this.isLoadingResults=!0,this.exampleDatabase.getLeads(this.sort.active,this.sort.direction,this.paginator.pageIndex).pipe((0,F.K)(()=>(this.isLoadingResults=!1,this.isRateLimitReached=!0,(0,k.of)([])))).subscribe(e=>{"data"in e&&(this.isLoadingResults=!1,this.isRateLimitReached=!1,this.resultsLength=e.total_count,this.leadsData=e.data)}))}agents(){this._LeadsService.getAgentInfo().subscribe(e=>{this.allAgents=e},e=>{console.log(e)})}onOptionSelected(e,a){g().fire({html:"Are you sure want to Assign?",showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(n=>{if(n.isConfirmed){this.reassignLeadSelectedAgent=e.option.value;const d=a.lead_id;if(""!=this.reassignLeadSelectedAgent&&""!=d){var o=new FormData;o.append("agent_id",this.reassignLeadSelectedAgent.client_user_id),o.append("lead_id",d),this.loginuserId&&o.append("login_user_id",this.loginuserId),this._LeadsService.AssignLeads(o).subscribe(m=>{"success"===m.status&&(g().fire({title:"Success",html:"Lead Re-assigned Successfully",timer:2e3,showConfirmButton:!1}),this.reloadData())},m=>{console.log(m)})}else alert("SomeThing Wrong")}})}displayLeadLabel(e){return e?e.client_user_name:""}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(wt.eN),t.Y36(M.C))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-dashboard2"]],viewQuery:function(e,a){if(1&e&&(t.Gf(T.NW,5),t.Gf(L.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(a.paginator=n.first),t.iGM(n=t.CRH())&&(a.sort=n.first)}},decls:28,vars:6,consts:[[1,"cardWithShadow"],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","lead_id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lead_title"],["matColumnDef","customer_name"],["matColumnDef","customer_phone"],["matColumnDef","actions"],["matColumnDef","reassign"],["mat-cell","","style","width: 50px;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],[1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-cell","",2,"width","50px"],["appearance","outline",1,"custom-width","mt-5"],["type","text","placeholder","Select Agent","aria-label","Number","matInput","",3,"matAutocomplete"],[3,"displayWith","optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0),t._UZ(1,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",1),t.YNc(4,It,3,2,"div",2),t.TgZ(5,"div",3)(6,"table",4),t.ynx(7,5),t.YNc(8,Mt,2,0,"th",6),t.YNc(9,Ot,2,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,St,2,0,"th",6),t.YNc(12,Pt,2,1,"td",7),t.BQk(),t.ynx(13,9),t.YNc(14,Yt,2,0,"th",6),t.YNc(15,Jt,2,1,"td",7),t.BQk(),t.ynx(16,10),t.YNc(17,Rt,2,0,"th",6),t.YNc(18,Qt,2,1,"td",7),t.BQk(),t.ynx(19,11),t.YNc(20,kt,2,0,"th",6),t.YNc(21,Ft,3,0,"td",7),t.BQk(),t.ynx(22,12),t.YNc(23,Bt,2,0,"th",6),t.YNc(24,qt,6,3,"td",13),t.BQk(),t.YNc(25,Et,1,0,"tr",14),t.YNc(26,Ht,1,0,"tr",15),t.qZA()(),t._UZ(27,"mat-paginator",16),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",a.isLoadingResults||a.isRateLimitReached),t.xp6(2),t.Q6J("dataSource",a.leadsData),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.resultsLength)("pageSize",10))},dependencies:[p.sg,p.O5,_.XC,S.ey,_.ZL,Z.KE,x.Nt,h.a8,h.dn,h.dk,Nt.Ou,T.NW,L.YE,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,D.b],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}.custom-width[_ngcontent-%COMP%]{width:180px}[_nghost-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%]{height:80%!important}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:2px!important;padding-bottom:2px!important}[_nghost-%COMP%]     .mat-mdc-form-field-infix{min-height:10px!important}"]}),s})();class $t{constructor(i){this._httpClient=i}getLeads(i,e,a){return this._httpClient.get(`${Lt.N.baseUrl}/leads/get-new-lead?sort=${i}&order=${e}&page=${a+1}`).pipe((0,A.U)(m=>({...m,data:m.data.map((u,v)=>({...u,counter:v+1+10*a}))})))}}const Gt=[{path:"",children:[{path:"dashboard1",component:Q,data:{title:"Analytical",urls:[{title:"Dashboard",url:"/dashboards/dashboard1"},{title:"Analytical"}]}},{path:"dashboard2",component:Wt,data:{title:"eCommerce",urls:[{title:"Dashboard",url:"/dashboards/dashboard1"},{title:"eCommerce"}]}},{path:"dashboard1/:type",component:Q,data:{title:"Email",urls:[{title:"Dashboard",url:"/dashboards/dashboard1"},{title:"Email"}]}}]}];var Kt=l(9549),Xt=l(3669),zt=l(2164),Vt=l(5308),te=l(9383),ee=l(3617),ae=l(8280);let se=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[p.ez,b.Bz.forChild(Gt),Kt.q,D.e,x.c,Xt.A0,h.QW,zt._t,Vt.g,r.p0,x.c,L.JX,T.TU,te.g0,h.QW,c.u5,c.UX,ee.Nh,J.kb,R.JX,_.Bb,ae.FA]}),s})()}}]);